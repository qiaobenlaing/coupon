webpackJsonp([8],{239:function(t,o,s){function e(t){s(354)}var a=s(0)(s(334),s(381),e,null,null);t.exports=a.exports},294:function(t,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=s(13),a=s.n(e),i=s(116),n=(s.n(i),s(6));o.default={props:["imgSrcArr"],data:function(){return{swiperOption:{notNextTick:!0,autoplay:!0,effect:"effect",grabCursor:!1,setWrapperSize:!0,pagination:{el:".swiper-pagination",clickable:!0},prevButton:".swiper-button-prev",nextButton:".swiper-button-next",observeParents:!0},newImgSrcArr:["/Public/Uploads/20180528/5b0bb30255d5a.jpg","/Public/Uploads/20180528/5b0bb300010f7.jpg"]}},computed:a()({},s.i(n.b)(["global"])),watch:{imgSrcArr:function(){this.loadSwiper()}},methods:{loadSwiper:function(){void 0===this.imgSrcArr?this.imgSrcArr=[]:"String"===Object.prototype.toString.call(this.imgSrcArr).slice(8,-1)?this.newImgSrcArr.push(this.imgSrcArr):this.newImgSrcArr=this.imgSrcArr}},created:function(){this.loadSwiper()},components:{swiper:i.swiper,swiperSlide:i.swiperSlide}}},296:function(t,o){},299:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{attrs:{id:"swiper"}},[s("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption}},[t._l(t.newImgSrcArr,function(o){return s("swiper-slide",{key:o},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.global.hftcomImgSrc+o,expression:"global.hftcomImgSrc + img"}]})])}),t._v(" "),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),t._v(" "),t._l(t.newImgSrcArr,function(o){return s("p",[t._v("img")])})],2)},staticRenderFns:[]}},302:function(t,o,s){function e(t){s(296)}var a=s(0)(s(294),s(299),e,null,null);t.exports=a.exports},334:function(t,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=s(336),a=s.n(e),i=s(13),n=s.n(i),r=s(117),l=s.n(r),c=s(302),p=s.n(c),d=s(6);o.default={name:"shopdetail",data:function(){return{ok:!0,albumImg:"本店暂无图片",shopImgList:[],shopAllInfo:{couponList:{shopCoupon:[]},shopInfo:{shopName:""}},shopDecoList:[],shopAllInfoFlag:!1,isCollect:!1,viptype:1,isadding:"",showmask:!1}},computed:n()({},s.i(d.b)(["collectShopList","global","userCode","isLogin","zoneId"])),beforeCreate:function(){},methods:n()({},s.i(d.d)(["getCollectShop","getCollectInfo"]),{goBack:function(){this.$router.go(-1)},getShopDetail:function(){var t=this;this.axios({method:"post",url:this.global.hftcomClient,data:'{"id":19,"jsonrpc":"2.0","method":"getShopInfo","params":{"shopCode":"'+this.$route.params.shopCode+'","userCode":"'+this.$store.state.userCode+'","longitude":'+this.$store.state.longitude+',"latitude":'+this.$store.state.latitude+"}}",contentType:"application/json",dataType:"json"}).then(function(o){t.shopAllInfo=o.data.result,t.shopAllInfoFlag=!0,0!==t.collectShopList.length&&t.collectShopList.filter(function(o,s,e){t.shopAllInfo.shopInfo.shopCode===o.shopCode&&(t.isCollect=!0)}),t.showvipcard()})},getShopDecoration:function(){var t=this;this.axios({method:"post",url:this.global.hftcomClient,data:'{"id":19,"jsonrpc":"2.0","method":"cGetShopDecoration","params":{"shopCode":"'+this.$route.params.shopCode+'","page":1}}',contentType:"application/json",dataType:"json"}).then(function(o){t.shopDecoList=o.data.result.shopDecoList;var s=!0,e=!1,i=void 0;try{for(var n,r=a()(t.shopDecoList);!(s=(n=r.next()).done);s=!0){var l=n.value;t.shopImgList.push(l.imgUrl)}}catch(t){e=!0,i=t}finally{try{!s&&r.return&&r.return()}finally{if(e)throw i}}})},collectShop:function(t){var o=this;this.isLogin?this.axios({method:"post",url:this.global.hftcomShop,data:'{"id":19,"jsonrpc":"2.0","method":"showCollect","params":{"shopCode":"'+t+'","userCode":"'+this.$store.state.userCode+'","zoneId":"'+this.zoneId+'"}}',contentType:"application/json",dataType:"json"}).then(function(t){1===t.data.result?(o.isCollect=!0,o.$vux.toast.text("已收藏","bottom")):0===t.data.result?(o.isCollect=!1,o.$vux.toast.text("已取消收藏","bottom")):o.$vux.toast.text("数据错误，请稍后重试","bottom")}):(this.$store.state.isBLR=1,this.$store.state.showLoginBox=!0,this.$vux.toast.text("请登录","bottom"))},showvipcard:function(){var t=this;this.axios({method:"post",url:this.global.hftcomWeixinCard,data:'{"id":29,"jsonrpc":"2.0","method":"hasCard","params":{"userCode":"'+this.userCode+'","shopCode":"'+this.shopAllInfo.shopInfo.shopCode+'"}}'}).then(function(o){5e4===o.data.result.code?!1===o.data.result.state?t.viptype=0:t.viptype=o.data.result.state:t.$vux.toast.text(o.data.result.code,"bottom")})},getvipcard:function(){var t=this;this.isLogin?0===this.viptype?this.axios({method:"post",url:this.global.hftcomWeixinCard,data:'{"id":29,"jsonrpc":"2.0","method":"addCardUser","params":{"userCode":"'+this.userCode+'","shopCode":"'+this.shopAllInfo.shopInfo.shopCode+'"}}'}).then(function(o){if(console.log(o.data),5e4===o.data.result.code)switch(o.data.result.state){case!0:t.viptype=2,t.$vux.toast.text("领取成功","bottom"),t.addvipcard(t.shopAllInfo.shopInfo.shopCode);break;case!1:t.$vux.toast.text("领取失败，请重试","bottom");break;default:t.$vux.toast.text(o.data.result.state,"bottom")}else t.$vux.toast.text(o.data.result.code,"bottom")}):this.addvipcard(this.shopAllInfo.shopInfo.shopCode):(this.$store.state.isBLR=1,this.$store.state.showLoginBox=!0,this.$vux.toast.text("请登录","bottom"))},addvipcard:function(t){var o=this;this.isadding=t,this.axios({method:"post",url:this.global.hftcomWeixinCard,data:'{"id":29,"jsonrpc":"2.0","method":"addWeixinCard","params":{"userCode":"'+this.userCode+'","shopCode":"'+t+'"}}'}).then(function(t){console.log(t.data),""===t.data.result.signPakage||void 0===t.data.result.signPakage?o.$vux.toast.text("数据请求错误，请稍后重试","bottom"):(o.cardInfo=t.data.result.cardInfo,o.signPakage=t.data.result.signPakage,o.userCardCode=t.data.result.userCardCode,o.addcardtoweixin()),o.isadding=""})},updateUserWeixinCard:function(){var t=this;this.axios({method:"post",url:this.global.hftcomWeixinCard,data:'{"id":29,"jsonrpc":"2.0","method":"updateUserWeixinCard","params":{"userCardCode":"'+this.userCardCode+'"}}'}).then(function(o){t.viptype=1,t.$vux.toast.text("已添加","bottom")})},addcardtoweixin:function(){var t=this;wx.config({debug:!1,appId:this.signPakage.appid,timestamp:this.signPakage.timestamp,nonceStr:this.signPakage.noncestr,signature:this.signPakage.signature,jsApiList:["addCard"]}),wx.ready(function(){wx.addCard({cardList:[{code:t.cardInfo.code,cardId:t.cardInfo.card_id,cardExt:'{"code":"'+t.cardInfo.code+'","timestamp":"'+t.cardInfo.timestamp+'","signature":"'+t.cardInfo.signature+'","nonce_str":"'+t.cardInfo.nonce_str+'"}'}],success:function(o){t.updateUserWeixinCard()},cancel:function(o){t.$vux.toast.text("取消添加","bottom")}})}),wx.error(function(t){console.log("err",t)})}}),created:function(){this.getShopDetail(),this.getShopDecoration(),this.getCollectShop(),this.getCollectInfo()},components:{swiper:p.a,indexcoupon:l.a}}},336:function(t,o,s){t.exports={default:s(340),__esModule:!0}},340:function(t,o,s){s(80),s(47),t.exports=s(343)},343:function(t,o,s){var e=s(10),a=s(79);t.exports=s(4).getIterator=function(t){var o=a(t);if("function"!=typeof o)throw TypeError(t+" is not iterable!");return e(o.call(t))}},354:function(t,o){},381:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{attrs:{id:"shopdetail"}},[s("div",{staticClass:"album"},[s("header",{staticClass:"header"},[s("div",{staticClass:"header-item icon-back",on:{click:t.goBack}}),t._v(" "),s("div",{staticClass:"header-item"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!1===t.isCollect,expression:"isCollect ===false"}],staticClass:"icon-collect",on:{click:function(o){t.collectShop(t.shopAllInfo.shopInfo.shopCode)}}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.isCollect,expression:"isCollect === true"}],staticClass:"icon-collect-solid theme-red",on:{click:function(o){t.collectShop(t.shopAllInfo.shopInfo.shopCode)}}})])]),t._v(" "),0!==t.shopImgList.length?s("swiper",{attrs:{imgSrcArr:t.shopImgList}}):t._e()],1),t._v(" "),s("div",{staticClass:"shopInfoWrapper"},[s("p",{staticClass:"shopName"},[t._v(t._s(t.shopAllInfo.shopInfo.shopName)+" "),s("span",{staticClass:"popularity"},[t._v("人气："+t._s(t.shopAllInfo.shopInfo.popularity))])]),t._v(" "),s("div",{staticClass:"shopInfo"},[s("div",{staticClass:"left"},[s("div",{staticClass:"clock"},[s("div",{staticClass:"icon icon-clock"}),t._v(" "),s("div",{staticClass:"clocktext"},t._l(t.shopAllInfo.shopInfo.businessHours,function(o){return s("p",[t._v(t._s(o.open)+"-"+t._s(o.close))])}))]),t._v(" "),s("div",{staticClass:"location"},[s("div",{staticClass:"icon icon-location"}),t._v(" "),s("div",{staticClass:"locationtext"},[s("p",[s("span",[t._v(t._s(t.shopAllInfo.shopInfo.city))]),s("span",[t._v(t._s(t.shopAllInfo.shopInfo.district))]),s("span",[t._v(t._s(t.shopAllInfo.shopInfo.street))])])])])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"content"},[s("a",{attrs:{href:"tel:"+t.shopAllInfo.shopInfo.tel}},[s("p",{staticClass:"icon-phone"})])])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showmask,expression:"showmask"}],staticClass:"mask"}),t._v(" "),s("div",{staticClass:"shopCoupon"},[s("p",{staticClass:"name"},[t._v("优惠券")]),t._v(" "),0===t.shopAllInfo.couponList.shopCoupon.length?s("p",{staticClass:"text"},[t._v("本店暂无可领优惠券")]):t._e(),t._v(" "),t._l(t.shopAllInfo.couponList.shopCoupon,function(o){return t.shopAllInfoFlag?s("indexcoupon",{key:o.batchCouponCode,attrs:{index:o}}):t._e()})],2),t._v(" "),s("div",{staticClass:"shopdetail"},[s("p",{staticClass:"name"},[t._v("商家详情")]),t._v(" "),""===t.shopAllInfo.shopInfo.shortDes?s("p",{staticClass:"text"},[t._v("本店暂无商家详情")]):t._e(),t._v(" "),s("p",{staticClass:"content"},[t._v(t._s(t.shopAllInfo.shopInfo.shortDes))])])])},staticRenderFns:[]}}});
//# sourceMappingURL=8.7e70c8da1d79e42a88f6.js.map