<table class="fp-table table table-striped table-bordered table-condensed" id="data_table">
    <thead>
    <tr>
        <th>版本名称</th>
        <th>版本号</th>
        <th>创建时间</th>
        <th>升级路径</th>
        <th class="width-95">是否必须更新</th>
        <th>升级内容</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    <foreach name="dataList" item="item">
        <tr>
            <td>{$item.versionName}</td>
            <td>{$item.versionCode}</td>
            <td>{$item.createTime}</td>
            <td>{$item.updateUrl}</td>
            <td><eq name="item.isMustUpdate" value="1">是<else/>否</eq></td>
            <td>{$item.updateContent}</td>
            <td>
                <a href="/Admin/PcAppLog/editPcAppLog?logCode={$item.logCode}&page={$pager:page}" class="btn btn-xs btn-primary">编辑</a>
                <a href="#" class="btn btn-xs btn-danger btn-del-pc-app" data-log-code="{$item.logCode}" data-pagenum="{$pager:page}">删除</a>
            </td>
        </tr>
    </foreach>
    </tbody>
</table>
<script>
    // 删除PC上应用升级记录
    ;(function(){
        $('.btn-del-pc-app').on('click', function(){
            var ret = confirm('确认删除吗？');
            if(ret) {
                var logCode = $(this).data('logCode');
                var pageNum = $(this).data('pagenum');
                $.post('/Admin/PcAppLog/delPcAppLog', {'logCode': logCode}, function(resp){
                    if(resp.status == sz.STATUS_SUCC) {
                        var searchFrm = $(sz.SEARCH_FORM_ID);
                        $(sz.SEARCH_FORM_ID + ' input[name=page]').val(pageNum);
                        // 提交FORM，更新数据
                        $.get(searchFrm.attr('action'), searchFrm.serialize(), function(resp) {
                            console.log(resp);
                            if (resp.status == sz.STATUS_SUCC) {
                                $(sz.DATA_LIST_TABLE_WRAPPER_ID).html(resp.html);
                            } else {
                                sz.showErrMsg(resp.msg);
                            }
                        });
                    } else {
                        sz.showErrMsg(resp.msg);
                    }
                });
            }
        });
    })();
</script>
<include file="Application/Admin/View/Widget/pager.html" /> 