{"version":3,"sources":["webpack:///static/js/11.fb7fcfb9501c7cf65f68.js","webpack:///./src/components/order/submitorder.vue?daec","webpack:///./src/components/header/header2.vue?dae3*","webpack:///./src/components/header/header2.vue?e75d*","webpack:///./src/components/header/header2.vue?6c4f*","webpack:///./src/components/order/submitorder.vue","webpack:///./src/components/order/submitorder.vue?3fda"],"names":["webpackJsonp","237","module","exports","__webpack_require__","injectStyle","ssrContext","Component","293","__webpack_exports__","Object","defineProperty","value","props","methods","goBack","this","$router","go","296","298","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","on","click","_v","_s","title","staticRenderFns","299","333","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__components_header_header2__","__WEBPACK_IMPORTED_MODULE_2__components_header_header2___default","data","count","isSucess","Boolean","currentOrderInfo","countMyReceived","logoUrl","payPrice","batchCouponCode","$route","params","activeCode","query","discountPrice","computed","i","totalPrice","undefined","toFixed","watch","Math","round","nbrPerPerson","$vux","toast","text","add","minus","showIndexCouponDetails","_this","axios","method","url","global","hftcomShop","contentType","dataType","then","result","BatchCouponInfo","shopDecoration","ShopDecoration","imgUrl","getUserCouponNbr","getDiscountPrice","_this2","console","log","_this3","userCode","filter","element","index","self","status","submitOrder","_this4","dataStr","shopCode","hftcomClient","order","code","payType","replace","path","created","components","header2","a","364","392","src","hftcomImgSrc","alt","couponName","function","remark","class","appType","_e","for","directives","name","rawName","expression","minus-disabled","modifiers","number","domProps","input","$event","target","composing","_n","blur","$forceUpdate"],"mappings":"AAAAA,cAAc,KAERC,IACA,SAAUC,EAAQC,EAASC,GCHjC,QAAAC,GAAAC,GACAF,EAAA,KAEA,GAAAG,GAAAH,EAAA,GAEAA,EAAA,KAEAA,EAAA,KAEAC,EAEA,KAEA,KAGAH,GAAAC,QAAAI,EAAAJ,SDUMK,IACA,SAAUN,EAAQO,EAAqBL,GAE7C,YE7BAM,QAAAC,eAAAF,EAAA,cAAAG,OAAA,IASAH,EAAA,SACII,OAAQ,SACRC,SACIC,OADK,WAEDC,KAAKC,QAAQC,IAAI,OFsCvBC,IACA,SAAUjB,EAAQC,KAMlBiB,IACA,SAAUlB,EAAQC,GG3DxBD,EAAAC,SAAgBkB,OAAA,WAAmB,GAAAC,GAAAN,KAAaO,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,OACAC,GAAA,aAEGH,EAAA,UACHI,YAAA,WACGJ,EAAA,QACHI,YAAA,wBACAC,IACAC,MAAAT,EAAAP,UAEGO,EAAAU,GAAA,KAAAP,EAAA,QACHI,YAAA,gBACGP,EAAAU,GAAAV,EAAAW,GAAAX,EAAAY,eACFC,qBHiEKC,IACA,SAAUlC,EAAQC,EAASC,GIjFjC,QAAAC,GAAAC,GACAF,EAAA,KAEA,GAAAG,GAAAH,EAAA,GAEAA,EAAA,KAEAA,EAAA,KAEAC,EAEA,KAEA,KAGAH,GAAAC,QAAAI,EAAAJ,SJwFMkC,IACA,SAAUnC,EAAQO,EAAqBL,GAE7C,YACAM,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,GAC7C,IAAI0B,GAA8DlC,EAAoB,IAClFmC,EAAsEnC,EAAoBoC,EAAEF,GAC5FG,EAAqCrC,EAAoB,GACzDsC,EAA2DtC,EAAoB,KAC/EuC,EAAmEvC,EAAoBoC,EAAEE,EKnFlHjC,GAAA,SACImC,KADW,WAEP,OACIC,MAAO,EACPC,SAAUC,QACVC,kBACIC,gBAAiB,EACjBC,QAAW,GACXC,SAAU,GAEdC,gBAAiBpC,KAAKqC,OAAOC,OAAOF,gBACpCG,WAAYvC,KAAKqC,OAAOG,MAAMD,WAC9BE,cAAe,IAGvBC,SAAAnB,OACOnC,EAAAuD,EAAAlB,EAAA,IAAU,SAAU,iBAAkB,QAAS,UAAW,WAAY,aAEzEmB,WAAY,WACR,MAAwB,KAApB5C,KAAKuC,gBAAyCM,KAApB7C,KAAKuC,YACvBvC,KAAK6B,MAAQ7B,KAAKyC,eAAeK,QAAQ,IAEzC9C,KAAK6B,MAAQ7B,KAAKgC,iBAAiBG,UAAUW,QAAQ,MAIzEC,OACIlB,MAAO,eAC2CgB,KAA1C7C,KAAKgC,iBAAiBC,kBACtBjC,KAAKgC,iBAAiBC,gBAAkB,GAE5CjC,KAAK6B,MAAQmB,KAAKC,MAAMjD,KAAK6B,QACzB7B,KAAK6B,MAAS7B,KAAKgC,iBAAiBkB,aAAelD,KAAKgC,iBAAiBC,iBAAoBjC,KAAK6B,MAAQ7B,KAAKgC,iBAAiBkB,gBAChIlD,KAAK6B,MAAQ7B,KAAKgC,iBAAiBkB,aAAelD,KAAKgC,iBAAiBC,gBACxEjC,KAAKmD,KAAKC,MAAMC,KAAK,WAAY,aAI7CvD,SACIC,OADK,WAEDC,KAAKC,QAAQC,IAAI,IAErBoD,IAAK,WACDtD,KAAK6B,SAET0B,MAAO,WACCvD,KAAK6B,MAAQ,GAGb7B,KAAK6B,SAGb2B,uBAAwB,WAAW,GAAAC,GAAAzD,IAC/BA,MAAK0D,OACDC,OAAQ,OACRC,IAAK5D,KAAK6D,OAAOC,WACjBlC,KAAM,sFAAwF5B,KAAKoC,gBAAkB,MACrH2B,YAAa,mBACbC,SAAU,SACXC,KAAK,SAACC,GACLT,EAAKzB,iBAAmBkC,EAAOtC,KAAKsC,OAAOC,gBAC3CV,EAAKW,eAAiBF,EAAOtC,KAAKsC,OAAOG,eACzCZ,EAAKzB,iBAAiBE,QAAUgC,EAAOtC,KAAKsC,OAAOG,eAAeC,OAClEb,EAAKc,mBACLd,EAAKe,sBAGbA,iBAAkB,WAAW,GAAAC,GAAAzE,IACzBA,MAAK0D,OACDC,OAAQ,OACRC,IAAK,gBACLhC,KAAM,0EAA4E5B,KAAKuC,WAAa,MACpGwB,YAAa,mBACbC,SAAU,SACXC,KAAK,SAACC,GACLQ,QAAQC,IAAIT,GACZO,EAAKhC,cAAgByB,EAAOtC,KAAKsC,UAGzCK,iBAAkB,WAAW,GAAAK,GAAA5E,IACzBA,MAAK0D,OACDC,OAAQ,OACRC,IAAK5D,KAAK6D,OAAOC,WACjBlC,KAAM,8EAAgF5B,KAAK6E,SAAW,wBAA0B7E,KAAKoC,gBAAkB,MACvJ2B,YAAa,mBACbC,SAAU,SACXC,KAAK,SAACC,OACyCrB,KAA1C+B,EAAK5C,iBAAiBC,kBACtB2C,EAAK5C,iBAAiBC,gBAAkB,GAExCiC,EAAOtC,KAAKsC,iBAAwCrB,KAAvBqB,EAAOtC,KAAKsC,OACzCA,EAAOtC,KAAKsC,UAEZA,EAAOtC,KAAKsC,OAAOY,OAAO,SAACC,EAASC,EAAOC,GAChB,MAAnBF,EAAQG,QAAqC,MAAnBH,EAAQG,QAClCN,EAAK5C,iBAAiBC,uBAM1CkD,YAAa,WAAW,GAAAC,GAAApF,IACpB,IAA4C,MAAvCA,KAAKgC,iBAAiBkB,cAA0BlD,KAAKgC,iBAAiBkB,aAAelD,KAAKgC,iBAAiBC,gBAAmB,EAC/HjC,KAAKmD,KAAKC,MAAMC,KAAK,SAAWrD,KAAKgC,iBAAiBC,gBAAkB,WAAY,cACjF,CACH,GAAIoD,EAEAA,GADoB,KAApBrF,KAAKuC,gBAAyCM,KAApB7C,KAAKuC,WACrB,4EAA8EvC,KAAK6E,SAAW,iBAAmB7E,KAAKgC,iBAAiBsD,SAAW,wBAA0BtF,KAAKgC,iBAAiBI,gBAAkB,iBAAmBpC,KAAK6B,MAAQ,gDAAkD7B,KAAKuC,WAAa,MAExT,4EAA8EvC,KAAK6E,SAAW,iBAAmB7E,KAAKgC,iBAAiBsD,SAAW,wBAA0BtF,KAAKgC,iBAAiBI,gBAAkB,iBAAmBpC,KAAK6B,MAAQ,iCAElQ7B,KAAK0D,OACDC,OAAQ,OACRC,IAAK5D,KAAK6D,OAAO0B,aACjB3D,KAAMyD,IACPpB,KAAK,SAACuB,GACL,OAAQA,EAAM5D,KAAKsC,OAAOuB,MAC1B,IAAK,KACDL,EAAKI,MAAQA,EAAM5D,KAAKsC,OACxBkB,EAAKI,MAAMpD,gBAAkBgD,EAAKpD,iBAAiBI,gBACnDgD,EAAKI,MAAME,QAAU,YACrBhB,QAAQC,IAAIa,EAAM5D,KAAKsC,QACvBkB,EAAKnF,QAAQ0F,SAASC,KAAM,WAAYpD,OAAQgD,MAAOJ,EAAKI,QAC5D,MACJ,KAAK,QACDJ,EAAKjC,KAAKC,MAAMC,KAAK,YAAa,SAClC,MACJ,KAAK,QACD+B,EAAKjC,KAAKC,MAAMC,KAAK,WAAY,SACjC,MACJ,KAAK,QACD+B,EAAKjC,KAAKC,MAAMC,KAAK,eAAgB,SACrC,MACJ,SACIqB,QAAQC,IAAIa,EAAM5D,KAAKsC,OAAOuB,YAMlDI,QA5IW,WA6IP7F,KAAKwD,0BAETsC,YACIC,QAAApE,EAAAqE,KLoIFC,IACA,SAAU/G,EAAQC,KAMlB+G,IACA,SAAUhH,EAAQC,GM1TxBD,EAAAC,SAAgBkB,OAAA,WAAmB,GAAAC,GAAAN,KAAaO,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,OACAC,GAAA,iBAEGH,EAAA,WACHE,OACAO,MAAA,UAEGZ,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,+BACGJ,EAAA,OACHI,YAAA,QACGJ,EAAA,OACHE,OACAwF,IAAA7F,EAAAuD,OAAAuC,aAAA9F,EAAA0B,iBAAAE,QACAmE,IAAA,QAEG/F,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,cACGP,EAAAU,GAAAV,EAAAW,GAAAX,EAAA0B,iBAAAsE,YAAAhG,EAAAW,GAAAX,EAAA0B,iBAAAuE,UAAAjG,EAAAW,GAAAX,EAAA0B,iBAAAwE,WAAAlG,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,aACGJ,EAAA,QACHgG,MAAA,KAAAnG,EAAAiC,gBAAAM,KAAAvC,EAAAiC,WAAA,iBACGjC,EAAAU,GAAA,IAAAV,EAAAW,GAAAX,EAAA0B,iBAAAG,UAAA,OAAA7B,EAAAU,GAAA,UAAAV,EAAAiC,gBAAAM,KAAAvC,EAAAiC,YAAA,IAAAvC,KAAA0G,QAAAjG,EAAA,QAAAH,EAAAU,GAAA,IAAAV,EAAAW,GAAAX,EAAAmC,eAAA,OAAAnC,EAAAqG,SAAArG,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,eACGJ,EAAA,SACHE,OACAiG,IAAA,WAEGtG,EAAAU,GAAA,SAAAV,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,cACGJ,EAAA,QACHoG,aACAC,KAAA,OACAC,QAAA,SACAnH,MAAA,MAAAU,EAAA0B,iBAAAkB,aACA8D,WAAA,wCAEAnG,YAAA,iBACGP,EAAAU,GAAA,SAAAV,EAAAW,GAAAX,EAAA0B,iBAAAkB,cAAA,OAAA5C,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,QACA4F,OACAQ,iBAAA3G,EAAAuB,MAAA,GAEAf,IACAC,MAAAT,EAAAiD,SAEGjD,EAAAU,GAAA,OAAAV,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,QACGJ,EAAA,SACHoG,aACAC,KAAA,QACAC,QAAA,iBACAnH,MAAAU,EAAA,MACA0G,WAAA,QACAE,WACAC,QAAA,KAGAxG,OACAC,GAAA,QACAhB,MAAA,KAEAwH,UACAxH,MAAAU,EAAA,OAEAQ,IACAuG,MAAA,SAAAC,GACAA,EAAAC,OAAAC,YACAlH,EAAAuB,MAAAvB,EAAAmH,GAAAH,EAAAC,OAAA3H,SAEA8H,KAAA,SAAAJ,GACAhH,EAAAqH,qBAGGrH,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,MACAC,IACAC,MAAAT,EAAAgD,OAEGhD,EAAAU,GAAA,WAAAV,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,eACGJ,EAAA,SACHE,OACAiG,IAAA,WAEGtG,EAAAU,GAAA,UAAAV,EAAAU,GAAA,KAAAP,EAAA,QACHI,YAAA,eACGP,EAAAU,GAAAV,EAAAW,GAAAX,EAAAsC,YAAA,SAAAtC,EAAAU,GAAA,KAAAP,EAAA,OACHI,YAAA,MACAC,IACAC,MAAAT,EAAA6E,eAEG7E,EAAAU,GAAA,eACFG","file":"static/js/11.fb7fcfb9501c7cf65f68.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 237:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(364)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(333),\n  /* template */\n  __webpack_require__(392),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 293:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: ['title'],\n    methods: {\n        goBack: function goBack() {\n            this.$router.go(-1);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 296:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 298:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"header2\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\"\n  }, [_vm._v(_vm._s(_vm.title))])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 299:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(296)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(293),\n  /* template */\n  __webpack_require__(298),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 333:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_header_header2__ = __webpack_require__(299);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_header_header2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_header_header2__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            count: 1,\n            isSucess: Boolean,\n            currentOrderInfo: {\n                countMyReceived: 0,\n                'logoUrl': '',\n                payPrice: 0\n            },\n            batchCouponCode: this.$route.params.batchCouponCode,\n            activeCode: this.$route.query.activeCode,\n            discountPrice: 0\n        };\n    },\n\n    computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapState */])(['global', 'CouponListInfo', 'isBLR', 'isLogin', 'userCode', 'appType']), {\n\n        totalPrice: function totalPrice() {\n            if (this.activeCode !== '' && this.activeCode !== undefined) {\n                return (this.count * this.discountPrice).toFixed(2);\n            } else {\n                return (this.count * this.currentOrderInfo.payPrice).toFixed(2);\n            }\n        }\n    }),\n    watch: {\n        count: function count() {\n            if (this.currentOrderInfo.countMyReceived === undefined) {\n                this.currentOrderInfo.countMyReceived = 0;\n            }\n            this.count = Math.round(this.count);\n            if (this.count > this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived || this.count > this.currentOrderInfo.nbrPerPerson) {\n                this.count = this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived;\n                this.$vux.toast.text('您已到达领取限额', 'middle');\n            }\n        }\n    },\n    methods: {\n        goBack: function goBack() {\n            this.$router.go(-1);\n        },\n\n        add: function add() {\n            this.count++;\n        },\n        minus: function minus() {\n            if (this.count < 2) {\n                return;\n            } else {\n                this.count--;\n            }\n        },\n        showIndexCouponDetails: function showIndexCouponDetails() {\n            var _this = this;\n\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomShop,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getBachCouponInfo\",\"params\":{\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                _this.currentOrderInfo = result.data.result.BatchCouponInfo;\n                _this.shopDecoration = result.data.result.ShopDecoration;\n                _this.currentOrderInfo.logoUrl = result.data.result.ShopDecoration.imgUrl;\n                _this.getUserCouponNbr();\n                _this.getDiscountPrice();\n            });\n        },\n        getDiscountPrice: function getDiscountPrice() {\n            var _this2 = this;\n\n            this.axios({\n                method: 'post',\n                url: '/Api/Activity',\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getPrice\",\"params\":{\"activityCode\":\"' + this.activeCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                console.log(result);\n                _this2.discountPrice = result.data.result;\n            });\n        },\n        getUserCouponNbr: function getUserCouponNbr() {\n            var _this3 = this;\n\n            // 拿到同一批券的券码，进行数据更新\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomShop,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getUserCouponNbr\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                if (_this3.currentOrderInfo.countMyReceived === undefined) {\n                    _this3.currentOrderInfo.countMyReceived = 0;\n                }\n                if (result.data.result === [] || result.data.result === undefined) {\n                    result.data.result = [];\n                } else {\n                    result.data.result.filter(function (element, index, self) {\n                        if (element.status === '1' || element.status === '2') {\n                            _this3.currentOrderInfo.countMyReceived++;\n                        }\n                    });\n                }\n            });\n        },\n        submitOrder: function submitOrder() {\n            var _this4 = this;\n\n            if (this.currentOrderInfo.nbrPerPerson !== '0' && this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived < 1) {\n                this.$vux.toast.text('您已经购买了' + this.currentOrderInfo.countMyReceived + '张，无法再次购买', 'middle');\n            } else {\n                var dataStr;\n                if (this.activeCode !== '' && this.activeCode !== undefined) {\n                    dataStr = '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"addCouponOrder\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"shopCode\":\"' + this.currentOrderInfo.shopCode + '\",\"batchCouponCode\":\"' + this.currentOrderInfo.batchCouponCode + '\",\"couponNbr\":' + this.count + ',\"platBonus\":0,\"shopBonus\":0,\"activityCode\":\"' + this.activeCode + '\"}}';\n                } else {\n                    dataStr = '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"addCouponOrder\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"shopCode\":\"' + this.currentOrderInfo.shopCode + '\",\"batchCouponCode\":\"' + this.currentOrderInfo.batchCouponCode + '\",\"couponNbr\":' + this.count + ',\"platBonus\":0,\"shopBonus\":0}}';\n                }\n                this.axios({ // 这是提交订单方法\n                    method: 'post',\n                    url: this.global.hftcomClient,\n                    data: dataStr\n                }).then(function (order) {\n                    switch (order.data.result.code) {\n                        case 50000:\n                            _this4.order = order.data.result;\n                            _this4.order.batchCouponCode = _this4.currentOrderInfo.batchCouponCode;\n                            _this4.order.payType = 'BUYCOUPON';\n                            console.log(order.data.result);\n                            _this4.$router.replace({ path: '/gotopay', query: { order: _this4.order } });\n                            break;\n                        case '80238':\n                            _this4.$vux.toast.text('您已经达到购买上限', 'middle');\n                            break;\n                        case '80220':\n                            _this4.$vux.toast.text('当前时间无法使用', 'middle');\n                            break;\n                        case '80221':\n                            _this4.$vux.toast.text('此优惠券已抢光，无法购买', 'middle');\n                            break;\n                        default:\n                            console.log(order.data.result.code);\n                    }\n                });\n            }\n        }\n    },\n    created: function created() {\n        this.showIndexCouponDetails();\n    },\n\n    components: {\n        header2: __WEBPACK_IMPORTED_MODULE_2__components_header_header2___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 364:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 392:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"submitorder\"\n    }\n  }, [_c('header2', {\n    attrs: {\n      \"title\": '提交订单'\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item order-item-more\"\n  }, [_c('div', {\n    staticClass: \"img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.global.hftcomImgSrc + _vm.currentOrderInfo.logoUrl,\n      \"alt\": \"\"\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"orderName\"\n  }, [_vm._v(_vm._s(_vm.currentOrderInfo.couponName) + _vm._s(_vm.currentOrderInfo.function) + _vm._s(_vm.currentOrderInfo.remark))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"payPrice\"\n  }, [_c('span', {\n    class: _vm.activeCode !== '' && _vm.activeCode !== undefined ? 'pricespan' : ''\n  }, [_vm._v(\"￥\" + _vm._s(_vm.currentOrderInfo.payPrice) + \"元\")]), _vm._v(\" \"), (_vm.activeCode !== '' && _vm.activeCode !== undefined && this.appType === 1) ? _c('span', [_vm._v(\"￥\" + _vm._s(_vm.discountPrice) + \"元\")]) : _vm._e()])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"count\"\n    }\n  }, [_vm._v(\"数量:\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"count-inp\"\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.currentOrderInfo.nbrPerPerson !== '0'),\n      expression: \"currentOrderInfo.nbrPerPerson!=='0'\"\n    }],\n    staticClass: \"nbrPerPerson\"\n  }, [_vm._v(\"每个用户限领\" + _vm._s(_vm.currentOrderInfo.nbrPerPerson) + \"张\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"minus\",\n    class: {\n      'minus-disabled': _vm.count < 2\n    },\n    on: {\n      \"click\": _vm.minus\n    }\n  }, [_vm._v(\"-\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"inp\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.number\",\n      value: (_vm.count),\n      expression: \"count\",\n      modifiers: {\n        \"number\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"count\",\n      \"value\": \"1\"\n    },\n    domProps: {\n      \"value\": (_vm.count)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.count = _vm._n($event.target.value)\n      },\n      \"blur\": function($event) {\n        _vm.$forceUpdate()\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"add\",\n    on: {\n      \"click\": _vm.add\n    }\n  }, [_vm._v(\"+\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"price\"\n    }\n  }, [_vm._v(\"实付款:\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"totalPrice\"\n  }, [_vm._v(_vm._s(_vm.totalPrice) + \"元\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"pay\",\n    on: {\n      \"click\": _vm.submitOrder\n    }\n  }, [_vm._v(\"提交订单\")])], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.fb7fcfb9501c7cf65f68.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44e668ce\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./submitorder.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./submitorder.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-44e668ce\\\",\\\"hasScoped\\\":false}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./submitorder.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/order/submitorder.vue\n// module id = 237\n// module chunks = 11","//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default{\r\n    props: ['title'],\r\n    methods: {\r\n        goBack () {\r\n            this.$router.go(-1);\r\n        }\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/header/header2.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"header2\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\"\n  }, [_vm._v(_vm._s(_vm.title))])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-cf78e062\",\"hasScoped\":false}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/header/header2.vue\n// module id = 298\n// module chunks = 5 11 12 13","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cf78e062\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./header2.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./header2.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cf78e062\\\",\\\"hasScoped\\\":false}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./header2.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/header/header2.vue\n// module id = 299\n// module chunks = 5 11 12 13","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapState} from 'vuex';\nimport header2 from '@/components/header/header2';\nexport default {\n    data() {\n        return {\n            count: 1,\n            isSucess: Boolean,\n            currentOrderInfo: {\n                countMyReceived: 0,\n                'logoUrl': '',\n                payPrice: 0\n            },\n            batchCouponCode: this.$route.params.batchCouponCode,\n            activeCode: this.$route.query.activeCode,\n            discountPrice: 0\n        };\n    },\n    computed: {\n        ...mapState(['global', 'CouponListInfo', 'isBLR', 'isLogin', 'userCode', 'appType']),\n\n        totalPrice: function() {\n            if (this.activeCode !== '' && this.activeCode !== undefined) {\n                return (this.count * this.discountPrice).toFixed(2);\n            } else {\n                return (this.count * this.currentOrderInfo.payPrice).toFixed(2);\n            }\n        }\n    },\n    watch: {\n        count: function() {\n            if (this.currentOrderInfo.countMyReceived === undefined) {\n                this.currentOrderInfo.countMyReceived = 0;\n            }\n            this.count = Math.round(this.count);\n            if (this.count > (this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived) || this.count > this.currentOrderInfo.nbrPerPerson) {\n                this.count = this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived;\n                this.$vux.toast.text('您已到达领取限额', 'middle');\n            }\n        }\n    },\n    methods: {\n        goBack () {\n            this.$router.go(-1);\n        },\n        add: function() {\n            this.count++;\n        },\n        minus: function() {\n            if (this.count < 2) {\n                return;\n            } else {\n                this.count--;\n            }\n        },\n        showIndexCouponDetails: function() {\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomShop,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getBachCouponInfo\",\"params\":{\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then((result) => {\n                this.currentOrderInfo = result.data.result.BatchCouponInfo;\n                this.shopDecoration = result.data.result.ShopDecoration;\n                this.currentOrderInfo.logoUrl = result.data.result.ShopDecoration.imgUrl;\n                this.getUserCouponNbr();\n                this.getDiscountPrice();\n            });\n        },\n        getDiscountPrice: function() {\n            this.axios({\n                method: 'post',\n                url: '/Api/Activity',\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getPrice\",\"params\":{\"activityCode\":\"' + this.activeCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then((result) => {\n                console.log(result);\n                this.discountPrice = result.data.result;\n            });\n        },\n        getUserCouponNbr: function() { // 拿到同一批券的券码，进行数据更新\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomShop,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getUserCouponNbr\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then((result) => {\n                if (this.currentOrderInfo.countMyReceived === undefined) {\n                    this.currentOrderInfo.countMyReceived = 0;\n                }\n                if (result.data.result === [] || result.data.result === undefined) {\n                    result.data.result = [];\n                } else {\n                    result.data.result.filter((element, index, self) => {\n                        if (element.status === '1' || element.status === '2') {\n                            this.currentOrderInfo.countMyReceived++;\n                        }\n                    });\n                }\n            });\n        },\n        submitOrder: function() {\n            if ((this.currentOrderInfo.nbrPerPerson !== '0') && (this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived) < 1) {\n                this.$vux.toast.text('您已经购买了' + this.currentOrderInfo.countMyReceived + '张，无法再次购买', 'middle');\n            } else {\n                var dataStr;\n                if (this.activeCode !== '' && this.activeCode !== undefined) {\n                    dataStr = '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"addCouponOrder\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"shopCode\":\"' + this.currentOrderInfo.shopCode + '\",\"batchCouponCode\":\"' + this.currentOrderInfo.batchCouponCode + '\",\"couponNbr\":' + this.count + ',\"platBonus\":0,\"shopBonus\":0,\"activityCode\":\"' + this.activeCode + '\"}}';\n                } else {\n                    dataStr = '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"addCouponOrder\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"shopCode\":\"' + this.currentOrderInfo.shopCode + '\",\"batchCouponCode\":\"' + this.currentOrderInfo.batchCouponCode + '\",\"couponNbr\":' + this.count + ',\"platBonus\":0,\"shopBonus\":0}}';\n                }\n                this.axios({ // 这是提交订单方法\n                    method: 'post',\n                    url: this.global.hftcomClient,\n                    data: dataStr\n                }).then((order) => {\n                    switch (order.data.result.code) {\n                    case 50000:\n                        this.order = order.data.result;\n                        this.order.batchCouponCode = this.currentOrderInfo.batchCouponCode;\n                        this.order.payType = 'BUYCOUPON';\n                        console.log(order.data.result);\n                        this.$router.replace({path: '/gotopay', query: {order: this.order}});\n                        break;\n                    case '80238':\n                        this.$vux.toast.text('您已经达到购买上限', 'middle');\n                        break;\n                    case '80220':\n                        this.$vux.toast.text('当前时间无法使用', 'middle');\n                        break;\n                    case '80221':\n                        this.$vux.toast.text('此优惠券已抢光，无法购买', 'middle');\n                        break;\n                    default:\n                        console.log(order.data.result.code);\n                    }\n                });\n            }\n        }\n    },\n    created() {\n        this.showIndexCouponDetails();\n    },\n    components: {\n        header2\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/order/submitorder.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"submitorder\"\n    }\n  }, [_c('header2', {\n    attrs: {\n      \"title\": '提交订单'\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item order-item-more\"\n  }, [_c('div', {\n    staticClass: \"img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.global.hftcomImgSrc + _vm.currentOrderInfo.logoUrl,\n      \"alt\": \"\"\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"orderName\"\n  }, [_vm._v(_vm._s(_vm.currentOrderInfo.couponName) + _vm._s(_vm.currentOrderInfo.function) + _vm._s(_vm.currentOrderInfo.remark))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"payPrice\"\n  }, [_c('span', {\n    class: _vm.activeCode !== '' && _vm.activeCode !== undefined ? 'pricespan' : ''\n  }, [_vm._v(\"￥\" + _vm._s(_vm.currentOrderInfo.payPrice) + \"元\")]), _vm._v(\" \"), (_vm.activeCode !== '' && _vm.activeCode !== undefined && this.appType === 1) ? _c('span', [_vm._v(\"￥\" + _vm._s(_vm.discountPrice) + \"元\")]) : _vm._e()])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"count\"\n    }\n  }, [_vm._v(\"数量:\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"count-inp\"\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.currentOrderInfo.nbrPerPerson !== '0'),\n      expression: \"currentOrderInfo.nbrPerPerson!=='0'\"\n    }],\n    staticClass: \"nbrPerPerson\"\n  }, [_vm._v(\"每个用户限领\" + _vm._s(_vm.currentOrderInfo.nbrPerPerson) + \"张\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"minus\",\n    class: {\n      'minus-disabled': _vm.count < 2\n    },\n    on: {\n      \"click\": _vm.minus\n    }\n  }, [_vm._v(\"-\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"inp\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.number\",\n      value: (_vm.count),\n      expression: \"count\",\n      modifiers: {\n        \"number\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"count\",\n      \"value\": \"1\"\n    },\n    domProps: {\n      \"value\": (_vm.count)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.count = _vm._n($event.target.value)\n      },\n      \"blur\": function($event) {\n        _vm.$forceUpdate()\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"add\",\n    on: {\n      \"click\": _vm.add\n    }\n  }, [_vm._v(\"+\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"price\"\n    }\n  }, [_vm._v(\"实付款:\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"totalPrice\"\n  }, [_vm._v(_vm._s(_vm.totalPrice) + \"元\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"pay\",\n    on: {\n      \"click\": _vm.submitOrder\n    }\n  }, [_vm._v(\"提交订单\")])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-44e668ce\",\"hasScoped\":false}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/order/submitorder.vue\n// module id = 392\n// module chunks = 11"],"sourceRoot":""}