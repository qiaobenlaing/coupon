{"version":3,"sources":["webpack:///static/js/22.fd8ed190d56d012522b1.js","webpack:///./src/components/search/couponSearch.vue?af11","webpack:///./src/components/search/couponSearch.vue","webpack:///./src/components/search/couponSearch.vue?2a7c"],"names":["webpackJsonp","251","module","exports","__webpack_require__","injectStyle","ssrContext","Component","361","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_2_vuex__","__WEBPACK_IMPORTED_MODULE_3__components_coupon_indexcoupon_vue__","__WEBPACK_IMPORTED_MODULE_3__components_coupon_indexcoupon_vue___default","__WEBPACK_IMPORTED_MODULE_4__components_loadGif_loadGif_vue__","__WEBPACK_IMPORTED_MODULE_4__components_loadGif_loadGif_vue___default","data","searchWord","couponType","page","searchCouponList","show","maskShow","type1","busy","nextPage","currentPage","iconShow","headInput","showLoadGif","couponTypeList","name","computed","i","beforeCreate","watch","newval","oldval","this","$data","methods","hiddenMask","typeSearch","couponType1","searchCoupon","showCouponType","goBack","$router","go","that","axios","method","url","$store","state","global","hftcomClient","longitude","latitude","localCity","userCode","zoneId","contentType","dataType","then","result","couponList","CouponListInfo","concat","hiddenLoadGif","searchConponLoadMore","$vux","toast","text","created","mounted","components","indexcoupon","a","loadGif","387","425","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","on","click","_v","directives","rawName","expression","ref","class","type","placeholder","domProps","input","$event","target","composing","_s","_l","key","_e","infinite-scroll-disabled","infinite-scroll-distance","each","batchCouponCode","index","staticRenderFns"],"mappings":"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","file":"static/js/22.fd8ed190d56d012522b1.js","sourcesContent":["webpackJsonp([22],{\n\n/***/ 251:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(387)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(361),\n  /* template */\n  __webpack_require__(425),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-2fc1d619\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 361:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_coupon_indexcoupon_vue__ = __webpack_require__(117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_coupon_indexcoupon_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_coupon_indexcoupon_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_loadGif_loadGif_vue__ = __webpack_require__(118);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_loadGif_loadGif_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_loadGif_loadGif_vue__);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            searchWord: '', // 搜索用的参数\n            couponType: 0, // 搜索用 优惠券类型 默认为0 全部搜索\n            page: 1, // 页数 查询用\n            searchCouponList: [],\n            show: false,\n            maskShow: false, // 判断 遮罩层 用\n            type1: '券类型',\n            busy: true,\n            nextPage: 0, // 判断用\n            currentPage: 0,\n            iconShow: false,\n            headInput: true,\n            showLoadGif: true,\n            couponTypeList: [{\n                name: '全部',\n                value: 0\n            }, {\n                name: 'N元购',\n                value: 1\n            }, {\n                name: '抵扣券',\n                value: 3\n            }, {\n                name: '折扣券',\n                value: 4\n            }, {\n                name: '实物券',\n                value: 5\n            }, {\n                name: '体验券',\n                value: 6\n            }, {\n                name: '兑换券',\n                value: 7\n            }, {\n                name: '代金券',\n                value: 8\n            }]\n        };\n    },\n\n    computed: __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"b\" /* mapState */])(['localCity', 'global', 'zoneId'])),\n    beforeCreate: function beforeCreate() {},\n\n    watch: {\n        // 监听search的变化\n        searchWord: function searchWord(newval, oldval) {\n            this.$data.page = 1; // 发现search变化后 将page变为1\n        }\n    },\n    methods: {\n        // ListIsNull() {\n        //     if (this.searchCouponList.length < 1) {\n        //         this.showLoadGif = false;\n        //         this.$vux.toast.text('当前没有优惠券', 'bottom');\n        //     }\n        // },\n        hiddenMask: function hiddenMask() {\n            //  收起下拉框和遮罩层\n            this.show = false;\n            this.maskShow = false;\n            this.iconShow = false;\n        },\n        typeSearch: function typeSearch(couponType1) {\n            this.couponType = couponType1.value;\n            this.page = 1; // 进入类型搜索时将page设为1\n            this.searchCoupon();\n            this.type1 = couponType1.name;\n            this.show = false;\n            this.maskShow = false;\n        },\n        showCouponType: function showCouponType() {\n            if (this.show === true) {\n                this.show = false;\n                this.maskShow = false;\n                this.iconShow = false;\n            } else {\n                this.show = true;\n                this.maskShow = true;\n                this.iconShow = true;\n            }\n        },\n        goBack: function goBack() {\n            this.$router.go(-1);\n        },\n        searchCoupon: function searchCoupon() {\n            // 搜索用的方法\n            var that = this;\n            this.showLoadGif = true;\n            this.axios({\n                method: 'post',\n                url: this.$store.state.global.hftcomClient,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"listCoupon\",\"params\":{\"couponType\":' + this.$data.couponType + ',\"searchWord\":\"' + this.$data.searchWord + '\",\"longitude\":' + this.$store.state.longitude + ',\"latitude\":' + this.$store.state.latitude + ',\"page\":' + this.page + ',\"city\":\"' + this.$store.state.localCity + '\",\"userCode\":\"' + this.$store.state.userCode + '\",\"zoneId\":\"' + this.zoneId + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                if (that.page === 1) {\n                    that.$data.searchCouponList = result.data.result.couponList.CouponListInfo;\n                } else {\n                    that.$data.searchCouponList = [].concat(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default()(that.$data.searchCouponList), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default()(result.data.result.couponList.CouponListInfo));\n                }\n                that.nextPage = result.data.result.nextPage;\n                that.currentPage = result.data.result.page;\n                that.page++;\n                that.busy = false;\n                // that.ListIsNull();\n                that.hiddenLoadGif();\n            });\n        },\n        searchConponLoadMore: function searchConponLoadMore() {\n            this.busy = true;\n            if (this.nextPage > this.currentPage) {\n                this.searchCoupon();\n            } else {\n                this.busy = true;\n                this.$vux.toast.text('加载完毕', 'bottom');\n                this.showLoadGif = false;\n            }\n        },\n        hiddenLoadGif: function hiddenLoadGif() {\n            if (this.nextPage <= this.currentPage) {\n                this.$vux.toast.text('加载完毕', 'bottom');\n                this.showLoadGif = false;\n            }\n        }\n    },\n\n    created: function created() {\n        this.searchCoupon();\n    },\n    mounted: function mounted() {\n        this.headInput = false;\n    },\n\n    components: {\n        indexcoupon: __WEBPACK_IMPORTED_MODULE_3__components_coupon_indexcoupon_vue___default.a,\n        loadGif: __WEBPACK_IMPORTED_MODULE_4__components_loadGif_loadGif_vue___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 387:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 425:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"conponSearch\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"header-right\"\n  }, [_c('span', {\n    staticClass: \"haderitem2\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.searchWord),\n      expression: \"searchWord\"\n    }],\n    ref: \"input\",\n    class: _vm.headInput === true ? 'headInput' : 'move',\n    attrs: {\n      \"id\": \"head-input\",\n      \"type\": \"text\",\n      \"name\": \"\",\n      \"placeholder\": \"搜索优惠券\"\n    },\n    domProps: {\n      \"value\": (_vm.searchWord)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.searchWord = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item \",\n    on: {\n      \"click\": _vm.searchCoupon\n    }\n  }, [_vm._v(\"搜索\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"selectType \",\n    class: [_vm.iconShow == true ? 'activeCity' : ''],\n    on: {\n      \"click\": function($event) {\n        _vm.showCouponType()\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"type1 \"\n  }, [_vm._v(_vm._s(_vm.type1))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon-ctrl\",\n    class: [_vm.iconShow == true ? 'iconTurn' : '']\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.maskShow),\n      expression: \"maskShow\"\n    }],\n    staticClass: \"mask\",\n    on: {\n      \"click\": function($event) {\n        _vm.hiddenMask()\n      }\n    }\n  }), _vm._v(\" \"), (_vm.show) ? _c('div', {\n    staticClass: \"couponType1\"\n  }, _vm._l((_vm.couponTypeList), function(couponType1) {\n    return _c('div', {\n      key: couponType1.name,\n      staticClass: \"couponType2\",\n      class: [couponType1.value === _vm.couponType ? 'activeCity' : ''],\n      on: {\n        \"click\": function($event) {\n          _vm.typeSearch(couponType1)\n        }\n      }\n    }, [_vm._v(_vm._s(couponType1.name))])\n  })) : _vm._e(), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"infinite-scroll\",\n      rawName: \"v-infinite-scroll\",\n      value: (_vm.searchConponLoadMore),\n      expression: \"searchConponLoadMore\"\n    }],\n    staticClass: \"indexcoupon-wrapper\",\n    attrs: {\n      \"infinite-scroll-disabled\": \"busy\",\n      \"infinite-scroll-distance\": \"10\"\n    }\n  }, [_vm._l((_vm.searchCouponList), function(each) {\n    return _c('indexcoupon', {\n      key: each.batchCouponCode,\n      attrs: {\n        \"index\": each\n      }\n    })\n  }), _vm._v(\" \"), _c('loadGif', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showLoadGif),\n      expression: \"showLoadGif\"\n    }]\n  })], 2)])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/22.fd8ed190d56d012522b1.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2fc1d619\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./couponSearch.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./couponSearch.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2fc1d619\\\",\\\"hasScoped\\\":true}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./couponSearch.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-2fc1d619\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/couponSearch.vue\n// module id = 251\n// module chunks = 22","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapState } from 'vuex';\r\nimport indexcoupon from '@/components/coupon/indexcoupon.vue';\r\nimport loadGif from '@/components/loadGif/loadGif.vue';\r\nexport default {\r\n    data() {\r\n        return {\r\n            searchWord: '',  // 搜索用的参数\r\n            couponType: 0, // 搜索用 优惠券类型 默认为0 全部搜索\r\n            page: 1, // 页数 查询用\r\n            searchCouponList: [],\r\n            show: false,\r\n            maskShow: false,  // 判断 遮罩层 用\r\n            type1: '券类型',\r\n            busy: true,\r\n            nextPage: 0,  // 判断用\r\n            currentPage: 0,\r\n            iconShow: false,\r\n            headInput: true,\r\n            showLoadGif: true,\r\n            couponTypeList: [\r\n                {\r\n                    name: '全部',\r\n                    value: 0\r\n                },\r\n                {\r\n                    name: 'N元购',\r\n                    value: 1\r\n                },\r\n                {\r\n                    name: '抵扣券',\r\n                    value: 3\r\n                },\r\n                {\r\n                    name: '折扣券',\r\n                    value: 4\r\n                },\r\n                {\r\n                    name: '实物券',\r\n                    value: 5\r\n                },\r\n                {\r\n                    name: '体验券',\r\n                    value: 6\r\n                },\r\n                {\r\n                    name: '兑换券',\r\n                    value: 7\r\n                },\r\n                {\r\n                    name: '代金券',\r\n                    value: 8\r\n                }\r\n            ]\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState(['localCity', 'global', 'zoneId'])\r\n    },\r\n    beforeCreate() {\r\n    },\r\n    watch: {\r\n        // 监听search的变化\r\n        searchWord: function(newval, oldval) {\r\n            this.$data.page = 1; // 发现search变化后 将page变为1\r\n        }\r\n    },\r\n    methods: {\r\n        // ListIsNull() {\r\n        //     if (this.searchCouponList.length < 1) {\r\n        //         this.showLoadGif = false;\r\n        //         this.$vux.toast.text('当前没有优惠券', 'bottom');\r\n        //     }\r\n        // },\r\n        hiddenMask() {  //  收起下拉框和遮罩层\r\n            this.show = false;\r\n            this.maskShow = false;\r\n            this.iconShow = false;\r\n        },\r\n        typeSearch(couponType1) {\r\n            this.couponType = couponType1.value;\r\n            this.page = 1; // 进入类型搜索时将page设为1\r\n            this.searchCoupon();\r\n            this.type1 = couponType1.name;\r\n            this.show = false;\r\n            this.maskShow = false;\r\n        },\r\n        showCouponType() {\r\n            if (this.show === true) {\r\n                this.show = false;\r\n                this.maskShow = false;\r\n                this.iconShow = false;\r\n            } else {\r\n                this.show = true;\r\n                this.maskShow = true;\r\n                this.iconShow = true;\r\n            }\r\n        },\r\n        goBack () {\r\n            this.$router.go(-1);\r\n        },\r\n        searchCoupon() {  // 搜索用的方法\r\n            let that = this;\r\n            this.showLoadGif = true;\r\n            this.axios({\r\n                method: 'post',\r\n                url: this.$store.state.global.hftcomClient,\r\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"listCoupon\",\"params\":{\"couponType\":' + this.$data.couponType + ',\"searchWord\":\"' + this.$data.searchWord + '\",\"longitude\":' + this.$store.state.longitude + ',\"latitude\":' + this.$store.state.latitude + ',\"page\":' + this.page + ',\"city\":\"' + this.$store.state.localCity + '\",\"userCode\":\"' + this.$store.state.userCode + '\",\"zoneId\":\"' + this.zoneId + '\"}}',\r\n                contentType: 'application/json',\r\n                dataType: 'json'\r\n            }).then((result) => {\r\n                if (that.page === 1) {\r\n                    that.$data.searchCouponList = result.data.result.couponList.CouponListInfo;\r\n                } else {\r\n                    that.$data.searchCouponList = [...that.$data.searchCouponList, ...result.data.result.couponList.CouponListInfo];\r\n                }\r\n                that.nextPage = result.data.result.nextPage;\r\n                that.currentPage = result.data.result.page;\r\n                that.page++;\r\n                that.busy = false;\r\n                // that.ListIsNull();\r\n                that.hiddenLoadGif();\r\n            });\r\n        },\r\n        searchConponLoadMore () {\r\n            this.busy = true;\r\n            if (this.nextPage > this.currentPage) {\r\n                this.searchCoupon();\r\n            } else {\r\n                this.busy = true;\r\n                this.$vux.toast.text('加载完毕', 'bottom');\r\n                this.showLoadGif = false;\r\n            }\r\n        },\r\n        hiddenLoadGif() {\r\n            if (this.nextPage <= this.currentPage) {\r\n                this.$vux.toast.text('加载完毕', 'bottom');\r\n                this.showLoadGif = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.searchCoupon();\r\n    },\r\n    mounted() {\r\n        this.headInput = false;\r\n    },\r\n    components: {\r\n        indexcoupon,\r\n        loadGif\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/search/couponSearch.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"conponSearch\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"header-right\"\n  }, [_c('span', {\n    staticClass: \"haderitem2\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.searchWord),\n      expression: \"searchWord\"\n    }],\n    ref: \"input\",\n    class: _vm.headInput === true ? 'headInput' : 'move',\n    attrs: {\n      \"id\": \"head-input\",\n      \"type\": \"text\",\n      \"name\": \"\",\n      \"placeholder\": \"搜索优惠券\"\n    },\n    domProps: {\n      \"value\": (_vm.searchWord)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.searchWord = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item \",\n    on: {\n      \"click\": _vm.searchCoupon\n    }\n  }, [_vm._v(\"搜索\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"selectType \",\n    class: [_vm.iconShow == true ? 'activeCity' : ''],\n    on: {\n      \"click\": function($event) {\n        _vm.showCouponType()\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"type1 \"\n  }, [_vm._v(_vm._s(_vm.type1))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon-ctrl\",\n    class: [_vm.iconShow == true ? 'iconTurn' : '']\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.maskShow),\n      expression: \"maskShow\"\n    }],\n    staticClass: \"mask\",\n    on: {\n      \"click\": function($event) {\n        _vm.hiddenMask()\n      }\n    }\n  }), _vm._v(\" \"), (_vm.show) ? _c('div', {\n    staticClass: \"couponType1\"\n  }, _vm._l((_vm.couponTypeList), function(couponType1) {\n    return _c('div', {\n      key: couponType1.name,\n      staticClass: \"couponType2\",\n      class: [couponType1.value === _vm.couponType ? 'activeCity' : ''],\n      on: {\n        \"click\": function($event) {\n          _vm.typeSearch(couponType1)\n        }\n      }\n    }, [_vm._v(_vm._s(couponType1.name))])\n  })) : _vm._e(), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"infinite-scroll\",\n      rawName: \"v-infinite-scroll\",\n      value: (_vm.searchConponLoadMore),\n      expression: \"searchConponLoadMore\"\n    }],\n    staticClass: \"indexcoupon-wrapper\",\n    attrs: {\n      \"infinite-scroll-disabled\": \"busy\",\n      \"infinite-scroll-distance\": \"10\"\n    }\n  }, [_vm._l((_vm.searchCouponList), function(each) {\n    return _c('indexcoupon', {\n      key: each.batchCouponCode,\n      attrs: {\n        \"index\": each\n      }\n    })\n  }), _vm._v(\" \"), _c('loadGif', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showLoadGif),\n      expression: \"showLoadGif\"\n    }]\n  })], 2)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2fc1d619\",\"hasScoped\":true}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/couponSearch.vue\n// module id = 425\n// module chunks = 22"],"sourceRoot":""}