webpackJsonp([20],{225:function(t,e,s){function o(t){s(401)}var a=s(0)(s(331),s(439),o,null,null);t.exports=a.exports},262:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["title"],methods:{goBack:function(){this.$router.go(-1)}}}},263:function(t,e){},264:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"header2"}},[s("header",{staticClass:"header"},[s("span",{staticClass:"header-item icon-back",on:{click:t.goBack}}),t._v(" "),s("span",{staticClass:"header-item"},[t._v(t._s(t.title))])])])},staticRenderFns:[]}},265:function(t,e,s){function o(t){s(263)}var a=s(0)(s(262),s(264),o,null,null);t.exports=a.exports},331:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(265),a=s.n(o);e.default={data:function(){return{sumMoney:"",totalPrice:0,storeName:"",discountMoney:"",storeCode:this.$route.params.storeCode,showBox:!1,verificationCode:"",orderNbr:""}},computed:{},watch:{sumMoney:function(t){t<=this.discountMoney?this.totalPrice=0:this.totalPrice=t-this.discountMoney}},methods:{goBack:function(){this.$router.go(-1)},submitOrder:function(){var t=this;this.totalPrice>=500?this.axios({method:"post",url:"/Api/GuiBankPay",data:'{"id":19,"jsonrpc":"2.0","method":"makeOrderAndPay","params":{"payAmount":"'+this.sumMoney+'","realPay":"'+this.totalPrice+'","userCode":"'+this.$store.state.userCode+'","payType":"normalPay","shopCode":"'+this.storeCode+'"}}',contentType:"application/json",dataType:"json"}).then(function(e){"success"===e.data.result.status?(t.orderNbr=e.data.result.orderNbr,t.showBox=!0):t.$vux.toast.text("请求失败，请联系管理员","bottom")}):(console.log('{"id":19,"jsonrpc":"2.0","method":"makeOrderAndPay","params":{"payAmount":"'+this.sumMoney+'","realPay":"'+this.totalPrice+'","userCode":"'+this.$store.state.userCode+'","payType":"freePay","shopCode":"'+this.storeCode+'"}}'),this.axios({method:"post",url:"/Api/GuiBankPay",data:'{"id":19,"jsonrpc":"2.0","method":"makeOrderAndPay","params":{"payAmount":"'+this.sumMoney+'","realPay":"'+this.totalPrice+'","userCode":"'+this.$store.state.userCode+'","payType":"freePay","shopCode":"'+this.storeCode+'"}}',contentType:"application/json",dataType:"json"}).then(function(e){"success"===e.data.result.status?(t.$router.push({path:"/accounts"}),t.$vux.toast.text("支付成功","bottom")):t.$vux.toast.text("支付失败","bottom")}))},isShowBox:function(t){this.showBox=t},cancel:function(){var t=this;this.axios({method:"post",url:"/Api/GuiBankPay",data:'{"id":19,"jsonrpc":"2.0","method":"cancelPay","params":{"userCode":"'+this.$store.state.userCode+'", "orderNbr": "'+this.orderNbr+'"}}',contentType:"application/json",dataType:"json"}).then(function(e){console.log(e),t.showBox=!1,t.$vux.toast.text("已取消支付","bottom")})},submitForm:function(){var t=this;this.axios({method:"post",url:"/Api/GuiBankPay",data:'{"id":19,"jsonrpc":"2.0","method":"makeSurePay","params":{"checkCode":"'+this.verificationCode+'", "orderNbr": "'+this.orderNbr+'"}}',contentType:"application/json",dataType:"json"}).then(function(e){"success"===e.data.result.status?(t.showBox=!1,t.$router.push({path:"/accounts"}),t.$vux.toast.text("支付成功","bottom")):(t.showBox=!1,t.$vux.toast.text("支付失败","bottom"))})}},mounted:function(){this.$refs.sumImput.focus()},created:function(){var t=this;this.storeCode=this.$route.params.storeCode,this.axios({method:"post",url:"/Api/GuiBankPay",data:'{"id":19,"jsonrpc":"2.0","method":"getPayInfo","params":{"shopCode":"'+this.$route.params.storeCode+'"}}',contentType:"application/json",dataType:"json"}).then(function(e){"success"===e.data.result.status&&(t.discountMoney=e.data.result.shopInfo.bankDiscount,t.storeName=e.data.result.shopInfo.shopName)})},components:{header2:a.a}}},401:function(t,e){},439:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settlement"}},[s("header2",{attrs:{title:"买单"}}),t._v(" "),s("div",{staticClass:"settlement-div"},[s("label",[t._v("总金额(元):")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sumMoney,expression:"sumMoney"}],ref:"sumImput",staticClass:"settlement-input",attrs:{id:"sum-money",autofocus:"autofocus"},domProps:{value:t.sumMoney},on:{input:function(e){e.target.composing||(t.sumMoney=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"settlement-div"},[s("label",[t._v("商家信息:")]),t._v(" "),s("span",{staticClass:"store-info"},[t._v(t._s(t.storeName))])]),t._v(" "),t.discountMoney>0?s("div",{staticClass:"settlement-div"},[s("label",[t._v("优惠金额(元):")]),t._v(" "),s("span",{staticClass:"store-info"},[t._v(t._s(t.discountMoney))])]):t._e(),t._v(" "),s("div",{staticClass:"settlement-div"},[s("label",[t._v("实付款:")]),t._v(" "),s("span",{staticClass:"totalPrice"},[t._v(t._s(t.totalPrice)+"元")])]),t._v(" "),s("div",{staticClass:"pay",on:{click:t.submitOrder}},[t._v("买单")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showBox,expression:"showBox"}],attrs:{id:"verificationCodeDailog"}},[s("div",{staticClass:"mask",on:{click:function(e){t.isShowBox(!1)}}}),t._v(" "),s("div",{staticClass:"table"},[s("form",{attrs:{action:""}},[t._m(0),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.verificationCode,expression:"verificationCode",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.verificationCode},on:{input:function(e){e.target.composing||(t.verificationCode=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),s("span",{staticClass:"submitbtn",on:{click:t.submitForm}},[s("span",[t._v("确定")])]),t._v(" "),s("span",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("span",[t._v("请输入验证码")])])}]}}});
//# sourceMappingURL=20.da082a7c33557faf6369.js.map