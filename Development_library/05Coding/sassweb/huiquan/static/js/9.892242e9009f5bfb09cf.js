webpackJsonp([9],{239:function(t,s,e){function i(t){e(342)}var o=e(0)(e(337),e(368),i,"data-v-12ed308f",null);t.exports=o.exports},304:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(13),o=e.n(i),a=e(6);s.default={data:function(){return{isCollect:!1,isCollecting:!1}},computed:o()({},e.i(a.b)(["global","collectShopList","isLogin"]),{isEmpty:function(){return this.collectShopList.length},computedShopName:function(){return this.methodGetByteLen(this.eachShopList.shopName,22)},computedStreet:function(){return this.methodGetByteLen(this.eachShopList.street,26)}}),props:["eachShopList"],methods:{toShopDetail:function(t){this.$router.push({path:"/shopDetail/"+t})},collectShop:function(t){var s=this;this.isLogin?(this.isCollecting=!0,this.axios({method:"post",url:this.global.hftcomShop,data:'{"id":19,"jsonrpc":"2.0","method":"showCollect","params":{"shopCode":"'+t+'","userCode":"'+this.$store.state.userCode+'"}}',contentType:"application/json",dataType:"json"}).then(function(t){s.isCollecting=!1,1===t.data.result?(s.isCollect=!0,s.$vux.toast.text("已收藏","bottom")):0===t.data.result?(s.isCollect=!1,s.$vux.toast.text("已取消收藏","bottom")):s.$vux.toast.text("数据错误","bottom")})):(this.$store.state.isBLR=1,this.$store.state.showLoginBox=!0,this.$vux.toast.text("请登陆","bottom"))},filterIsCollect:function(){var t=this;this.collectShopList.filter(function(s,e,i){t.eachShopList.shopCode===s.shopCode&&(t.isCollect=!0)})},methodGetByteLen:function(t,s){if(t.replace(/[^\x00-\xff]/g,"01").length<=s)return t;for(var e=Math.floor(s/2);e<t.length;e++)if(t.substr(0,e).replace(/[^\x00-\xff]/g,"01").length>=s)return t.substr(0,2*Math.floor(e/2))+"..."}},created:function(){this.filterIsCollect()}}},309:function(t,s){},311:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"background"},[e("div",{staticClass:"shoplist-item"},[e("div",{staticClass:"shopDetail",on:{click:function(s){t.toShopDetail(t.eachShopList.shopCode)}}},[e("div",{staticClass:"shop-logo"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.global.hftcom+t.eachShopList.logoUrl,expression:"global.hftcom+eachShopList.logoUrl"}]})]),t._v(" "),e("div",{staticClass:"shop-name"},[t._v("\n            "+t._s(t.computedShopName)+"\n        ")]),t._v(" "),e("div",{staticClass:"shop-street"},[e("span",{staticClass:"street"},[t._v(t._s(t.computedStreet))]),t._v(" "),t.eachShopList.distance<100?e("span",{staticClass:"distance"},[t._v("<100m")]):t._e(),t._v(" "),100<t.eachShopList.distance&&t.eachShopList.distance<500?e("span",{staticClass:"distance"},[t._v(">100m")]):t._e(),t._v(" "),t.eachShopList.distance>500?e("span",{staticClass:"distance"},[t._v(">500m")]):t._e()])]),t._v(" "),e("div",{staticClass:"collect"},[e("span",{directives:[{name:"show",rawName:"v-show",value:!1===t.isCollect&&!1===t.isCollecting,expression:"isCollect ===false && isCollecting === false"}],staticClass:"icon-collect",on:{click:function(s){t.collectShop(t.eachShopList.shopCode)}}}),t._v(" "),e("transition",{attrs:{name:"rotate"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isCollecting,expression:"isCollecting"}],staticClass:"icon-spinner8"})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.isCollect&&!1===t.isCollecting,expression:"isCollect === true && isCollecting === false"}],staticClass:"icon-collect-solid",on:{click:function(s){t.collectShop(t.eachShopList.shopCode)}}})],1)])])},staticRenderFns:[]}},314:function(t,s,e){function i(t){e(309)}var o=e(0)(e(304),e(311),i,null,null);t.exports=o.exports},337:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(17),o=e.n(i),a=e(34),h=e.n(a),n=e(13),c=e.n(n),l=e(314),r=e.n(l),u=e(118),d=e.n(u),p=e(115),m=e.n(p),w=e(6);s.default={data:function(){return{search:"",searchShopList:[],page:1,listSearchWords:[],searchCircle:"",circle:[],searchShopType:0,typeList:[],searchIntelligentSorting:0,intelligentSorting:[],serachFilter:0,filter:[],moduleValue:0,subList:[],searchContent:41,queryName:"",show1:!0,show2:!0,oneList:[],twoList:[],searchType:"",circleType:"",busy:!0,currentPage:0,nextPage:0,maskShow:!1,searchValue:"",searchValue2:"",iconShow1:!1,iconShow2:!1,iconShow3:!1,showLoadGif:!0,nShowNotHide:!1}},computed:c()({},e.i(w.b)(["shopDetail","global","collectShopList"]),{localCity:function(){return this.$store.state.localCity},searchTypeValue:function(){return this.$store.state.searchTypeValue}}),watch:{search:function(t,s){this.$data.page=1},localCity:function(t,s){var e=this;this.axios({method:"post",url:this.$store.state.global.hftcomClient,data:'{"id":19,"jsonrpc":"2.0","method":"listSearchWords","params":{"city":"'+this.$store.state.localCity+'"}}',contentType:"application/json",dataType:"json"}).then(function(t){e.$data.circle=t.data.result.circle,e.$data.typeList=t.data.result.type,e.$data.intelligentSorting=t.data.result.intelligentSorting,e.$data.filter=t.data.result.filter})}},methods:{ListIsNull:function(){this.searchShopList.length<1&&(this.showLoadGif=!1,this.$vux.toast.text("当前没有优惠券","bottom"))},iconBack:function(){this.iconShow1=!1,this.iconShow2=!1,this.iconShow3=!1},hiddenMask:function(){this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.iconBack()},subListIsNull:function(){for(var t=0;t<this.circle.list.length;t++){var s=this.circle.list[t];s.subListIsNull=!1,3===s.moduleValue|-1===s.moduleValue&&s.subList.length<1&&(s.subListIsNull=!0)}},showCircle:function(){this.$data.twoList=[],this.searchType=this.circle.zh,this.nShowNotHide=!0,this.show1?(this.nShowNotHide=!0,this.show1=!1,this.maskShow=!0,this.iconShow1=!0,this.subListIsNull(),this.oneList=this.circle.list):(this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.iconBack())},showType:function(){this.$data.twoList=[],this.searchType=this.typeList.zh,this.show1?(this.nShowNotHide=!0,this.show1=!1,this.maskShow=!0,this.iconShow2=!0):(this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.iconBack()),this.oneList=this.typeList.list},showIntelligentSorting:function(){this.$data.twoList=[],this.searchType=this.intelligentSorting.zh,this.nShowNotHide=!0,this.show1?(this.nShowNotHide=!0,this.show1=!1,this.maskShow=!0,this.iconShow3=!0):(this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.iconBack()),this.oneList=this.intelligentSorting.list},showFilter:function(){this.$data.twoList=[],this.searchType=this.filter.zh,this.nShowNotHide=!0,this.oneList=this.filter.list},showValue1:function(t){this.page=1,this.searchValue=t.queryName,this.searchType===this.typeList.zh&&(this.typeList.zh=t.queryName,this.searchShopType=t.value,this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.show()),this.searchType===this.intelligentSorting.zh&&(this.searchIntelligentSorting=t.value,this.intelligentSorting.zh=t.queryName,this.searchIntelligentSorting=t.value,this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.show()),this.searchType===this.filter.zh&&(this.serachFilter=t.value),this.searchType===this.circle.zh&&(this.moduleValue=t.moduleValue,-1===this.moduleValue&&(this.$data.twoList=this.$data.circle.list[1].subList),3===this.moduleValue&&(this.$data.twoList=this.$data.circle.list[2].subList),-2===this.moduleValue&&(this.$data.twoList=[],this.queryName=t.queryName,this.circle.zh=this.queryName,this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.show()),0===this.moduleValue&&(this.queryName="",this.$data.twoList=[],this.circle.zh=t.queryName,this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.show()))},showValue2:function(t){this.queryName="",this.searchContent=t.value,this.circle.zh=t.name,this.searchValue2=t.name,this.nShowNotHide=!1,this.show1=!0,this.maskShow=!1,this.show()},goBack:function(){this.$router.go(-1)},show:function(){var t=this;this.showLoadGif=!0,console.log(this.$data.page),this.axios({method:"post",url:this.$store.state.global.hftcomClient,data:'{"id":19,"jsonrpc":"2.0","method":"searchShop","params":{"searchWord":"'+this.$data.search+'","type":'+this.$data.searchShopType+',"userCode":"'+this.$store.state.userCode+'","longitude":'+this.$store.state.longitude+',"latitude":'+this.$store.state.latitude+',"page":'+this.$data.page+',"city":"'+this.$store.state.localCity+'","moduleValue":'+this.$data.moduleValue+',"content":'+this.$data.searchContent+',"order":'+this.$data.searchIntelligentSorting+',"filter":'+this.$data.serachFilter+',"queryName":"'+this.$data.queryName+'"}}',contentType:"application/json",dataType:"json"}).then(function(s){1===t.page?t.$data.searchShopList=s.data.result.shopList:t.$data.searchShopList=[].concat(h()(t.$data.searchShopList),h()(s.data.result.shopList)),t.currentPage=s.data.result.page,t.nextPage=s.data.result.nextPage,t.$data.page++,t.busy=!1,t.hiddenLoadGif(),t.ListIsNull()}),this.iconBack()},searchShopLoadMore:function(){this.busy=!0,this.nextPage>this.currentPage?this.show():(this.busy=!0,this.hiddenLoadGif())},hiddenLoadGif:function(){this.nextPage<=this.currentPage&&(this.showLoadGif=!1)},isCollectShop:function(){var t=this,s=this;this.axios({method:"post",url:this.$store.state.global.hftcomShop,data:'{"id":19,"jsonrpc":"2.0","method":"collectShop","params":{"userCode":"'+this.$store.state.userCode+'","latitude":'+this.$store.state.latitude+',"longitude":'+this.$store.state.longitude+"}}",contentType:"application/json",dataType:"json"}).then(function(e){"null"===e.data.result?s.$store.state.collectShopList=[]:s.$store.state.collectShopList=e.data.result[0],console.table(JSON.parse(o()(t.collectShopList,["isCollect","type"])))})}},beforeCreate:function(){var t=this;this.axios({method:"post",url:this.$store.state.global.hftcomClient,data:'{"id":19,"jsonrpc":"2.0","method":"listSearchWords","params":{"city":"'+this.$store.state.localCity+'"}}',contentType:"application/json",dataType:"json"}).then(function(s){t.$data.circle=s.data.result.circle,t.$data.typeList=s.data.result.type,t.$data.intelligentSorting=s.data.result.intelligentSorting,t.$data.filter=s.data.result.filter,t.typeList.zh=t.$store.state.searchTypeName,t.searchShopType=t.$store.state.searchTypeValue,"6"===t.searchShopType&&(t.searchShopType=0),t.show(),t.$store.state.searchShopList=[]})},created:function(){this.$store.state.searchTypeValue,"6"===this.$store.state.searchTypeValue?(this.$store.state.searchTypeName="行业",this.searchShopType=0):(this.typeList.zh=this.$store.state.searchTypeName,this.searchShopType=this.$store.state.searchTypeValue)},mounted:function(){this.isCollectShop()},beforeDestroy:function(){this.$store.state.searchTypeName="行业",this.$store.state.searchTypeValue=0},components:{shoplist:r.a,"v-nav":m.a,loadGif:d.a}}},342:function(t,s){},368:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"shopSearch"}},[e("header",{staticClass:"header"},[e("span",{staticClass:"header-item "}),t._v(" "),e("span",{staticClass:"header-item "},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"input",staticClass:"headInput",attrs:{type:"text",name:"",id:"",placeholder:"搜索商家"},domProps:{value:t.search},on:{input:function(s){s.target.composing||(t.search=s.target.value)}}})]),t._v(" "),e("span",{staticClass:"header-item ",on:{click:t.show}},[t._v("搜索")])]),t._v(" "),e("div",{attrs:{id:"newSearch"}},[e("div",{staticClass:"nCircle ",class:[1==t.iconShow1?"activeCity":""],on:{click:t.showCircle}},[t._v(" \n            "+t._s(t.circle.zh)),e("span",{staticClass:"icon-ctrl icon1",class:[1==t.iconShow1?"iconTurn":""]})]),t._v(" "),e("div",{staticClass:"nType ",class:[1==t.iconShow2?"activeCity":""],attrs:{id:"nType"},on:{click:t.showType}},[t._v(" \n            "+t._s(t.typeList.zh)),e("span",{staticClass:"icon-ctrl icon2",class:[1==t.iconShow2?"iconTurn":""]})]),t._v(" "),e("div",{staticClass:"nIntelligentSorting ",class:[1==t.iconShow3?"activeCity":""],on:{click:t.showIntelligentSorting}},[t._v(" \n            "+t._s(t.intelligentSorting.zh)),e("span",{staticClass:"icon-ctrl icon3",class:[1==t.iconShow3?"iconTurn":""]})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.maskShow,expression:"maskShow"}],staticClass:"mask",on:{click:function(s){t.hiddenMask()}}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.nShowNotHide,expression:"nShowNotHide"}],attrs:{id:"nShow"}},[t._l(t.oneList,function(s){return e("div",{key:s.queryName,staticClass:"fShow",class:[s.queryName===t.searchValue?"activeCity":"",!0===s.subListIsNull?"subListIsNull":""],attrs:{value:s.moduleValue,id:s.queryName},on:{click:function(e){t.showValue1(s)}}},[e("span",{staticClass:"fShow1"},[t._v(t._s(s.queryName))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:-1==s.moduleValue||3==s.moduleValue,expression:"one.moduleValue==-1||one.moduleValue==3"}],staticClass:"iconf icon-back"})])}),t._v(" "),e("div",{staticClass:"sShow"},t._l(t.twoList,function(s){return e("div",{key:s.name,staticClass:"tShow",class:[s.name===t.searchValue2?"activeCity":""],on:{click:function(e){t.showValue2(s)}}},[t._v("\n            "+t._s(s.name)+"\n            ")])}))],2),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.searchShopLoadMore,expression:"searchShopLoadMore"}],staticClass:"shoplist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[t._l(t.searchShopList,function(t){return e("shoplist",{key:t.shopCode,attrs:{eachShopList:t}})}),t._v(" "),e("loadGif",{directives:[{name:"show",rawName:"v-show",value:t.showLoadGif,expression:"showLoadGif"}]})],2),t._v(" "),e("v-nav",{staticClass:"nav"})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=9.892242e9009f5bfb09cf.js.map