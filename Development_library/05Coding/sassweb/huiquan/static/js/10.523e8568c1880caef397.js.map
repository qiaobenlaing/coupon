{"version":3,"sources":["webpack:///static/js/10.523e8568c1880caef397.js","webpack:///./src/components/order/submitorder.vue?daec","webpack:///./src/components/header/header2.vue?dae3*","webpack:///./src/components/header/header2.vue?e75d*","webpack:///./src/components/header/header2.vue?6c4f*","webpack:///./src/components/order/submitorder.vue","webpack:///./src/components/order/submitorder.vue?3fda"],"names":["webpackJsonp","232","module","exports","__webpack_require__","injectStyle","ssrContext","Component","288","__webpack_exports__","Object","defineProperty","value","props","methods","goBack","this","$router","go","289","290","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","on","click","_v","_s","title","staticRenderFns","291","331","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__components_header_header2__","__WEBPACK_IMPORTED_MODULE_2__components_header_header2___default","data","count","isSucess","Boolean","currentOrderInfo","countMyReceived","logoUrl","batchCouponCode","$route","params","computed","i","totalPrice","payPrice","toFixed","watch","undefined","Math","round","nbrPerPerson","$vux","toast","text","add","minus","showIndexCouponDetails","_this","axios","method","url","global","hftcomShop","contentType","dataType","then","result","BatchCouponInfo","shopDecoration","ShopDecoration","imgUrl","getUserCouponNbr","_this2","userCode","filter","element","index","self","status","submitOrder","_this3","hftcomClient","shopCode","order","code","payType","console","log","replace","path","query","created","components","header2","a","354","381","src","hftcom","alt","couponName","function","remark","for","directives","name","rawName","expression","class","minus-disabled","modifiers","number","domProps","input","$event","target","composing","_n","blur","$forceUpdate"],"mappings":"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","file":"static/js/10.523e8568c1880caef397.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 232:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(354)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(331),\n  /* template */\n  __webpack_require__(381),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 288:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: ['title'],\n    methods: {\n        goBack: function goBack() {\n            this.$router.go(-1);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 289:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 290:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"header2\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\"\n  }, [_vm._v(_vm._s(_vm.title))])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 291:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(289)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(288),\n  /* template */\n  __webpack_require__(290),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 331:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_header_header2__ = __webpack_require__(291);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_header_header2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_header_header2__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            count: 1,\n            isSucess: Boolean,\n            currentOrderInfo: {\n                countMyReceived: 0,\n                'logoUrl': ''\n            },\n            batchCouponCode: this.$route.params.batchCouponCode\n        };\n    },\n\n    computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapState */])(['global', 'CouponListInfo', 'isBLR', 'isLogin', 'userCode']), {\n\n        totalPrice: function totalPrice() {\n            return (this.count * this.currentOrderInfo.payPrice).toFixed(2);\n        }\n    }),\n    watch: {\n        count: function count() {\n            if (this.currentOrderInfo.countMyReceived === undefined) {\n                this.currentOrderInfo.countMyReceived = 0;\n            }\n            this.count = Math.round(this.count);\n            if (this.count > this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived || this.count > this.currentOrderInfo.nbrPerPerson) {\n                this.count = this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived;\n                this.$vux.toast.text('您已到达领取限额', 'middle');\n            }\n        }\n    },\n    methods: {\n        goBack: function goBack() {\n            this.$router.go(-1);\n        },\n\n        add: function add() {\n            this.count++;\n        },\n        minus: function minus() {\n            if (this.count < 2) {\n                return;\n            } else {\n                this.count--;\n            }\n        },\n        showIndexCouponDetails: function showIndexCouponDetails() {\n            var _this = this;\n\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomShop,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getBachCouponInfo\",\"params\":{\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                _this.currentOrderInfo = result.data.result.BatchCouponInfo;\n                _this.shopDecoration = result.data.result.ShopDecoration;\n                _this.currentOrderInfo.logoUrl = result.data.result.ShopDecoration.imgUrl;\n                _this.getUserCouponNbr();\n            });\n        },\n        getUserCouponNbr: function getUserCouponNbr() {\n            var _this2 = this;\n\n            // 拿到同一批券的券码，进行数据更新\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomShop,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getUserCouponNbr\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                if (_this2.currentOrderInfo.countMyReceived === undefined) {\n                    _this2.currentOrderInfo.countMyReceived = 0;\n                }\n                if (result.data.result === [] || result.data.result === undefined) {\n                    result.data.result = [];\n                } else {\n                    result.data.result.filter(function (element, index, self) {\n                        if (element.status === '1' || element.status === '2') {\n                            _this2.currentOrderInfo.countMyReceived++;\n                        }\n                    });\n                }\n            });\n        },\n        submitOrder: function submitOrder() {\n            var _this3 = this;\n\n            if (this.currentOrderInfo.nbrPerPerson !== '0' && this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived < 1) {\n                this.$vux.toast.text('您已经购买了' + this.currentOrderInfo.countMyReceived + '张，无法再次购买', 'middle');\n            } else {\n                this.axios({ // 这是提交订单方法\n                    method: 'post',\n                    url: this.global.hftcomClient,\n                    data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"addCouponOrder\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"shopCode\":\"' + this.currentOrderInfo.shopCode + '\",\"batchCouponCode\":\"' + this.currentOrderInfo.batchCouponCode + '\",\"couponNbr\":' + this.count + ',\"platBonus\":0,\"shopBonus\":0}}'\n                }).then(function (order) {\n                    switch (order.data.result.code) {\n                        case 50000:\n                            _this3.order = order.data.result;\n                            _this3.order.batchCouponCode = _this3.currentOrderInfo.batchCouponCode;\n                            _this3.order.payType = 'BUYCOUPON';\n                            console.log(order.data.result);\n                            _this3.$router.replace({ path: '/gotopay', query: { order: _this3.order } });\n                            break;\n                        case '80238':\n                            _this3.$vux.toast.text('您已经达到购买上限', 'middle');\n                            break;\n                        case '80221':\n                            _this3.$vux.toast.text('此优惠券已抢光，无法购买', 'middle');\n                            break;\n                        default:\n                            console.log(order.data.result.code);\n                    }\n                });\n            }\n        }\n    },\n    created: function created() {\n        this.showIndexCouponDetails();\n    },\n\n    components: {\n        header2: __WEBPACK_IMPORTED_MODULE_2__components_header_header2___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 381:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"submitorder\"\n    }\n  }, [_c('header2', {\n    attrs: {\n      \"title\": '提交订单'\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item order-item-more\"\n  }, [_c('div', {\n    staticClass: \"img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.global.hftcom + _vm.currentOrderInfo.logoUrl,\n      \"alt\": \"\"\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"orderName\"\n  }, [_vm._v(_vm._s(_vm.currentOrderInfo.couponName) + _vm._s(_vm.currentOrderInfo.function) + _vm._s(_vm.currentOrderInfo.remark))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"payPrice\"\n  }, [_vm._v(\"￥\" + _vm._s(_vm.currentOrderInfo.payPrice) + \"元\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"count\"\n    }\n  }, [_vm._v(\"数量:\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"count-inp\"\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.currentOrderInfo.nbrPerPerson !== '0'),\n      expression: \"currentOrderInfo.nbrPerPerson!=='0'\"\n    }],\n    staticClass: \"nbrPerPerson\"\n  }, [_vm._v(\"每个用户限领\" + _vm._s(_vm.currentOrderInfo.nbrPerPerson) + \"张\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"minus\",\n    class: {\n      'minus-disabled': _vm.count < 2\n    },\n    on: {\n      \"click\": _vm.minus\n    }\n  }, [_vm._v(\"-\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"inp\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.number\",\n      value: (_vm.count),\n      expression: \"count\",\n      modifiers: {\n        \"number\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"count\",\n      \"value\": \"1\"\n    },\n    domProps: {\n      \"value\": (_vm.count)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.count = _vm._n($event.target.value)\n      },\n      \"blur\": function($event) {\n        _vm.$forceUpdate()\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"add\",\n    on: {\n      \"click\": _vm.add\n    }\n  }, [_vm._v(\"+\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"price\"\n    }\n  }, [_vm._v(\"实付款:\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"totalPrice\"\n  }, [_vm._v(_vm._s(_vm.totalPrice) + \"元\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"pay\",\n    on: {\n      \"click\": _vm.submitOrder\n    }\n  }, [_vm._v(\"提交订单\")])], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.523e8568c1880caef397.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44e668ce\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./submitorder.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./submitorder.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-44e668ce\\\",\\\"hasScoped\\\":false}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./submitorder.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/order/submitorder.vue\n// module id = 232\n// module chunks = 10","//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default{\r\n    props: ['title'],\r\n    methods: {\r\n        goBack () {\r\n            this.$router.go(-1);\r\n        }\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/header/header2.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"header2\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\"\n  }, [_vm._v(_vm._s(_vm.title))])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-cf78e062\",\"hasScoped\":false}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/header/header2.vue\n// module id = 290\n// module chunks = 5 10 11 12","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cf78e062\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./header2.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./header2.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cf78e062\\\",\\\"hasScoped\\\":false}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./header2.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/header/header2.vue\n// module id = 291\n// module chunks = 5 10 11 12","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {mapState} from 'vuex';\r\nimport header2 from '@/components/header/header2';\r\nexport default {\r\n    data() {\r\n        return {\r\n            count: 1,\r\n            isSucess: Boolean,\r\n            currentOrderInfo: {\r\n                countMyReceived: 0,\r\n                'logoUrl': ''\r\n            },\r\n            batchCouponCode: this.$route.params.batchCouponCode\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState(['global', 'CouponListInfo', 'isBLR', 'isLogin', 'userCode']),\r\n\r\n        totalPrice: function() {\r\n            return (this.count * this.currentOrderInfo.payPrice).toFixed(2);\r\n        }\r\n    },\r\n    watch: {\r\n        count: function() {\r\n            if (this.currentOrderInfo.countMyReceived === undefined) {\r\n                this.currentOrderInfo.countMyReceived = 0;\r\n            }\r\n            this.count = Math.round(this.count);\r\n            if (this.count > (this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived) || this.count > this.currentOrderInfo.nbrPerPerson) {\r\n                this.count = this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived;\r\n                this.$vux.toast.text('您已到达领取限额', 'middle');\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        goBack () {\r\n            this.$router.go(-1);\r\n        },\r\n        add: function() {\r\n            this.count++;\r\n        },\r\n        minus: function() {\r\n            if (this.count < 2) {\r\n                return;\r\n            } else {\r\n                this.count--;\r\n            }\r\n        },\r\n        showIndexCouponDetails: function() {\r\n            this.axios({\r\n                method: 'post',\r\n                url: this.global.hftcomShop,\r\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getBachCouponInfo\",\"params\":{\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\r\n                contentType: 'application/json',\r\n                dataType: 'json'\r\n            }).then((result) => {\r\n                this.currentOrderInfo = result.data.result.BatchCouponInfo;\r\n                this.shopDecoration = result.data.result.ShopDecoration;\r\n                this.currentOrderInfo.logoUrl = result.data.result.ShopDecoration.imgUrl;\r\n                this.getUserCouponNbr();\r\n            });\r\n        },\r\n        getUserCouponNbr: function() { // 拿到同一批券的券码，进行数据更新\r\n            this.axios({\r\n                method: 'post',\r\n                url: this.global.hftcomShop,\r\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getUserCouponNbr\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"batchCouponCode\":\"' + this.batchCouponCode + '\"}}',\r\n                contentType: 'application/json',\r\n                dataType: 'json'\r\n            }).then((result) => {\r\n                if (this.currentOrderInfo.countMyReceived === undefined) {\r\n                    this.currentOrderInfo.countMyReceived = 0;\r\n                }\r\n                if (result.data.result === [] || result.data.result === undefined) {\r\n                    result.data.result = [];\r\n                } else {\r\n                    result.data.result.filter((element, index, self) => {\r\n                        if (element.status === '1' || element.status === '2') {\r\n                            this.currentOrderInfo.countMyReceived++;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        submitOrder: function() {\r\n            if ((this.currentOrderInfo.nbrPerPerson !== '0') && (this.currentOrderInfo.nbrPerPerson - this.currentOrderInfo.countMyReceived) < 1) {\r\n                this.$vux.toast.text('您已经购买了' + this.currentOrderInfo.countMyReceived + '张，无法再次购买', 'middle');\r\n            } else {\r\n                this.axios({ // 这是提交订单方法\r\n                    method: 'post',\r\n                    url: this.global.hftcomClient,\r\n                    data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"addCouponOrder\",\"params\":{\"userCode\":\"' + this.userCode + '\",\"shopCode\":\"' + this.currentOrderInfo.shopCode + '\",\"batchCouponCode\":\"' + this.currentOrderInfo.batchCouponCode + '\",\"couponNbr\":' + this.count + ',\"platBonus\":0,\"shopBonus\":0}}'\r\n                }).then((order) => {\r\n                    switch (order.data.result.code) {\r\n                    case 50000:\r\n                        this.order = order.data.result;\r\n                        this.order.batchCouponCode = this.currentOrderInfo.batchCouponCode;\r\n                        this.order.payType = 'BUYCOUPON';\r\n                        console.log(order.data.result);\r\n                        this.$router.replace({path: '/gotopay', query: {order: this.order}});\r\n                        break;\r\n                    case '80238':\r\n                        this.$vux.toast.text('您已经达到购买上限', 'middle');\r\n                        break;\r\n                    case '80221':\r\n                        this.$vux.toast.text('此优惠券已抢光，无法购买', 'middle');\r\n                        break;\r\n                    default:\r\n                        console.log(order.data.result.code);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.showIndexCouponDetails();\r\n    },\r\n    components: {\r\n        header2\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/order/submitorder.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"submitorder\"\n    }\n  }, [_c('header2', {\n    attrs: {\n      \"title\": '提交订单'\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item order-item-more\"\n  }, [_c('div', {\n    staticClass: \"img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.global.hftcom + _vm.currentOrderInfo.logoUrl,\n      \"alt\": \"\"\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"orderName\"\n  }, [_vm._v(_vm._s(_vm.currentOrderInfo.couponName) + _vm._s(_vm.currentOrderInfo.function) + _vm._s(_vm.currentOrderInfo.remark))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"payPrice\"\n  }, [_vm._v(\"￥\" + _vm._s(_vm.currentOrderInfo.payPrice) + \"元\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"count\"\n    }\n  }, [_vm._v(\"数量:\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"count-inp\"\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.currentOrderInfo.nbrPerPerson !== '0'),\n      expression: \"currentOrderInfo.nbrPerPerson!=='0'\"\n    }],\n    staticClass: \"nbrPerPerson\"\n  }, [_vm._v(\"每个用户限领\" + _vm._s(_vm.currentOrderInfo.nbrPerPerson) + \"张\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"minus\",\n    class: {\n      'minus-disabled': _vm.count < 2\n    },\n    on: {\n      \"click\": _vm.minus\n    }\n  }, [_vm._v(\"-\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"inp\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.number\",\n      value: (_vm.count),\n      expression: \"count\",\n      modifiers: {\n        \"number\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"count\",\n      \"value\": \"1\"\n    },\n    domProps: {\n      \"value\": (_vm.count)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.count = _vm._n($event.target.value)\n      },\n      \"blur\": function($event) {\n        _vm.$forceUpdate()\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"add\",\n    on: {\n      \"click\": _vm.add\n    }\n  }, [_vm._v(\"+\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"order-item\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"price\"\n    }\n  }, [_vm._v(\"实付款:\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"totalPrice\"\n  }, [_vm._v(_vm._s(_vm.totalPrice) + \"元\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"pay\",\n    on: {\n      \"click\": _vm.submitOrder\n    }\n  }, [_vm._v(\"提交订单\")])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-44e668ce\",\"hasScoped\":false}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/order/submitorder.vue\n// module id = 381\n// module chunks = 10"],"sourceRoot":""}