webpackJsonp([25],{111:function(t,e,o){"use strict";var i=o(3),n=o.n(i),a=o(107),s=o(7);n.a.use(a.a);var r=[],c=new a.a({mode:"history",linkActiveClass:"active",routes:r});c.beforeEach(function(t,e,o){t.meta.title&&(document.title=t.meta.title);var i={};i.to=t.query,i.from=e.query,console.log(i),s.a.dispatch("loginApp",i).then(function(){o()}).catch(function(){o()})}),e.a=c},114:function(t,e,o){function i(t){o(201)}var n=o(0)(o(147),o(214),i,null,null);t.exports=n.exports},138:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),n=o.n(i),a=o(114),s=o.n(a),r=o(19),c=o(9),u=o.n(c),l=o(7),d=o(111);n.a.use(r.a),u.a.defaults.headers.post["Content-Type"]="application/json",n.a.prototype.axios=u.a,new n.a({template:"<recharge/>",components:{recharge:s.a},store:l.a,router:d.a}).$mount("#recharge")},147:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(13),n=o.n(i),a=o(6);e.default={data:function(){return{sum:1,moneyactive:1,msg:"",paydata:{}}},computed:n()({},o.i(a.b)(["userCode","global"])),methods:{choose:function(t){this.sum=t,this.moneyactive=t},recharge:function(){var t=this;console.log({userCode:this.userCode,payPrice:this.sum}),this.axios({method:"post",url:"https://hfq.huift.com.cn/Admin/Lcy/weiPay",data:{userCode:this.userCode,payPrice:this.sum},transformRequest:[function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.paydata=e.data,t.callpay()})},jsApiCall:function(){var t=this;WeixinJSBridge.invoke("getBrandWCPayRequest",this.paydata,function(e){e.err_msg&&("get_brand_wcpay_request:cancel"===e.err_msg?t.$vux.toast.show({type:"text",text:"取消充值"}):t.$vux.toast.show({type:"success",text:"充值成功"})),t.msg=e})},callpay:function(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall)):this.jsApiCall()},openApp:function(){var t=navigator.userAgent,e="http://a.app.qq.com/o/simple.jsp?pkgname=com.icbc.elife";t.indexOf("ICBCAndroidBS")>-1?(window.location.href="com.icbc.elife://elife",window.setTimeout(function(){window.location.href=e},1e3)):t.indexOf("ICBCiPhoneBS")>-1?(window.location.href="com.icbc.elife://",window.setTimeout(function(){window.location.href=e},1e3)):window.location.href=e}},created:function(){!function(t,e){function o(){var e=a.getBoundingClientRect().width,o=e/10.8;a.style.fontSize=o+"px",l.rem=t.rem=o}var i,n=t.document,a=n.documentElement,s=n.querySelector('meta[name="viewport"]'),r=n.querySelector('meta[name="flexible"]'),c=0,u=0,l=e.flexible||(e.flexible={});if(s){console.warn("将根据已有的meta标签来设置缩放比例");var d=s.getAttribute("content").match(/initial\-scale=([\d\.]+)/);d&&(u=parseFloat(d[1]),c=parseInt(1/u))}else if(r){var p=r.getAttribute("content");if(p){var d=p.match(/initial\-dpr=([\d\.]+)/),m=p.match(/maximum\-dpr=([\d\.]+)/);d&&(c=parseFloat(d[1]),u=parseFloat((1/c).toFixed(2))),m&&(c=parseFloat(m[1]),u=parseFloat((1/c).toFixed(2)))}}if(!c&&!u){var f=(t.navigator.appVersion.match(/android/gi),t.navigator.appVersion.match(/iphone/gi)),h=t.devicePixelRatio;c=f?h>=3&&(!c||c>=3)?3:h>=2&&(!c||c>=2)?2:1:1,u=1/c}if(a.setAttribute("data-dpr",c),!s)if(s=n.createElement("meta"),s.setAttribute("name","viewport"),s.setAttribute("content","initial-scale="+u+", maximum-scale="+u+", minimum-scale="+u+", user-scalable=no"),a.firstElementChild)a.firstElementChild.appendChild(s);else{var C=n.createElement("div");C.appendChild(s),n.write(C.innerHTML)}t.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(o,300)},!1),t.addEventListener("orientationchange",function(){clearTimeout(i),i=setTimeout(o,300)},!1),t.addEventListener("pageshow",function(t){t.persisted&&(clearTimeout(i),i=setTimeout(o,300))},!1),"complete"===n.readyState?n.body.style.fontSize=12*c+"px":n.addEventListener("DOMContentLoaded",function(){n.body.style.fontSize=12*c+"px"},!1),o(),l.dpr=t.dpr=c,l.refreshRem=o,l.rem2px=function(t){var e=parseFloat(t)*this.rem;return"string"==typeof t&&t.match(/rem$/)&&(e+="px"),e},l.px2rem=function(t){var e=parseFloat(t)/this.rem;return"string"==typeof t&&t.match(/px$/)&&(e+="rem"),e}}(window,window.lib||(window.lib={}))},components:{}}},201:function(t,e){},21:function(t,e,o){"use strict";var i=o(34),n=o.n(i),a=o(17),s=o.n(a),r=o(35),c=o.n(r),u=o(24),l=o(9),d=o.n(l),p=o(72),m="https://api.map.baidu.com/location/ip",f="https://api.map.baidu.com/geocoder/v2/",h="gWgw4P7VsdvIduiXqujiRW3ObT3lkmhD";e.a={loginUser:function(t,e){var o=t.state,i=t.commit;return new c.a(function(t,n){d()({url:o.global.hftcomShop,method:"POST",data:'{"id": 67,"jsonrpc": "2.0","method": "mobileLogin","params": {"mobileNbr": "'+e.mobileNbr+'","Vcode":"'+e.Vcode+'"}}',contentType:"application/json",dataType:"json"}).then(function(e){5e4===e.data.result.Code?(u.a.setCookie("mobileNbr",e.data.result.mobileNbr,1),i("setStateItem",{name:"mobileNbr",data:e.data.result.mobileNbr}),u.a.setCookie("userCode",e.data.result.userCode,1),i("setStateItem",{name:"userCode",data:e.data.result.userCode}),o.isLogin=!0,t(!0)):n(e.data.result.error)})})},registerUser:function(t,e){var o=t.state;return new c.a(function(t,i){d()({url:o.global.hftcomShop,method:"POST",data:'{"id": 67,"jsonrpc": "2.0","method": "registerMobile","params": {"mobileNbr": "'+e.mobileNbr+'","Vcode":"'+e.Vcode+'"}}',contentType:"application/json"}).then(function(n){5e4===n.data.result.code?(o.mobileNbr=e.mobileNbr,u.a.setCookie("mobileNbr",o.mobileNbr,1),o.userCode=n.data.result.userCode,u.a.setCookie("userCode",o.userCode,1),o.isLogin=!0,t(!0)):i(n.data.result.error)})})},loginApp:function(t,e){var o=t.state,i=t.dispatch,n=t.commit;return new c.a(function(t,a){i("isWeiXin").then(function(){"weixin"===e.to.from?(n("setStateItem",{name:"from",data:e.to.from}),console.log(o.from),i("loginWeiXin_other",e)):""===e.to.openid||void 0===e.to.openid||i("loginWeiXin",e),t()}).catch(function(){if("{}"===s()(e.to)){for(var o in e.to)e.to[o]="";a()}else""!==e.to.IcbcApp&&void 0!==e.to.IcbcApp&&i("loginICBC",e),t()}),""!==e.to.zoneId&&void 0!==e.to.zoneId&&(o.zoneId=e.to.zoneId,u.a.setCookie("zoneId",o.zoneId,1))})},loginICBC:function(t,e){var o=t.state;return new c.a(function(t,i){d()({url:o.global.hftcomShop,method:"POST",data:'{"id":19,"jsonrpc":"2.0","method":"BankLogin","params":{"IcbcApp":"'+e.to.IcbcApp+'","WeiApp":""}}',contentType:"application/json"}).then(function(e){u.a.setCookie("userCode",e.data.result.userCode,1),o.userCode=e.data.result.userCode,u.a.setCookie("mobileNbr",e.data.result.mobileNbr,1),o.mobileNbr=e.data.result.mobileNbr,o.isLogin=!0,t()})})},loginWeiXin:function(t,e){var o=t.state;return new c.a(function(t,i){d()({method:"get",url:o.global.getAT,data:"",dataType:"json"}).then(function(t){d()({url:o.global.hftcomShop,method:"POST",data:'{"id":19,"jsonrpc":"2.0","method":"getUserInfo","params":{"openId":"'+e.to.openid+'","access_token":"'+t.data.access_token+'","zoneId":"'+e.to.zoneId+'"}}',contentType:"application/json"}).then(function(t){u.a.setCookie("userCode",t.data.result.userCode,1),o.userCode=t.data.result.userCode,void 0===o.userCode?console.log("登录未成功"):o.isLogin=!0})})})},loginWeiXin_other:function(t,e){var o=t.state;if("weixin"===e.to.from)return o.isChooseCity=!0,new c.a(function(t,i){d()({method:"get",url:o.global.getAT,data:"",dataType:"json"}).then(function(t){d()({url:o.global.hftcomShop,method:"POST",data:'{"id":19,"jsonrpc":"2.0","method":"getUserInfo","params":{"openId":"'+e.to.openid_other+'","access_token":"'+t.data.access_token+'","zoneId":"'+e.to.zoneId+'"}}',contentType:"application/json"}).then(function(t){u.a.setCookie("userCode",t.data.result.userCode,1),o.userCode=t.data.result.userCode,void 0===o.userCode?console.log("登录未成功"):o.isLogin=!0})})})},initLogin:function(t,e){var o=t.state;""!==o.userCode&&void 0!==o.userCode||(""===u.a.getCookie("userCode")||void 0===u.a.getCookie("userCode")?o.isLogin=!1:(o.mobileNbr=u.a.getCookie("mobileNbr"),o.userCode=u.a.getCookie("userCode"),o.isLogin=!0)),u.a.getCookie("localCity")?(o.localCity=u.a.getCookie("localCity"),o.longitude=u.a.getCookie("longitude"),o.latitude=u.a.getCookie("latitude"),o.zoneId=u.a.getCookie("zoneId")):(o.localCity="北京市",o.longitude="120.137198",o.latitude="30.878131")},clearCookie:function(t){var e=t.state;u.a.removeCookie("mobileNbr"),u.a.removeCookie("userCode"),u.a.removeCookie("tokenCode"),u.a.removeCookie("longitude"),u.a.removeCookie("latitude"),u.a.removeCookie("localCity"),u.a.setCookie({localCity:"北京市",latitude:"30.878131",longitude:"120.137198"},null,1),u.a.clearLocal(),e.mobileNbr="",e.userCode="",e.tokenCode="",e.localCity="北京市",e.latitude="30.878131",e.longitude="120.137198",e.isLogin=!1},getLocation:function(t){var e=(t.state,t.dispatch);return new c.a(function(t,o){function i(i){var n=i.coords.longitude,a=i.coords.latitude,s=a+","+n,r={};r.hftsource="navigator",r.longitude=n,r.latitude=a,f+="?callback=renderReverse&location="+s+"&output=json&pois=1&ak="+h,e("setLocation",r),p(f,null,function(e,i){e?o(e):(console.log("h5位置"),t(i.result.addressComponent.city))})}function n(t){switch(t.code){case t.PERMISSION_DENIED:o("用户拒绝对获取地理位置的请求");break;case t.POSITION_UNAVAILABLE:o("位置信息是不可用的");break;case t.TIMEOUT:o("请求用户地理位置超时");break;case t.UNKNOWN_ERROR:o("未知错误")}}var a={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation?navigator.geolocation.getCurrentPosition(i,n,a):o("该浏览器不支持获取地理位置")})},getLocationBaidu:function(t){var e=(t.state,t.dispatch);return new c.a(function(t,o){m+="?ak="+h+"&ip=&coor=",p(m,null,function(i,n){i?o(i):(n.hftsource="baiduip",e("setLocation",n),t(n))})})},getOpenCity:function(t){var e=t.state;t.dispatch;return new c.a(function(t,o){e.zoneId===Number||void 0===e.zoneId?console.log("没有选择商圈"):d()({method:"post",url:e.global.hftcomClient,data:'{"id":19,"jsonrpc":"2.0","method":"zonelistOpenCity","params":{"zoneId":'+e.zoneId+"}}"}).then(function(o){0!==o.data.result.length&&(e.isChooseCity=!0,console.log(o.data.result)),t(o.data)})})},setLocalCity:function(t,e){var o=t.state;return new c.a(function(t,i){""!==e&&(o.localCity=e,console.log("设置cookie"+o.localCity),u.a.setCookie("localCity",o.localCity,1),t())})},setLocation:function(t,e){var o=t.state;return new c.a(function(t,i){return"navigator"===e.hftsource?(o.longitude=e.longitude,u.a.setCookie("longitude",o.longitude,1),o.latitude=e.latitude,void u.a.setCookie("latitude",o.latitude,1)):"baiduip"===e.hftsource?(o.longitude=e.content.point.x,o.latitude=e.content.point.y,u.a.setCookie("longitude",o.longitude,1),void u.a.setCookie("latitude",o.latitude,1)):(f+="?address="+e+"&output=json&ak="+h,void p(f,null,function(t,e){t||(o.longitude=e.result.location.lng,u.a.setCookie("longitude",o.longitude,1),o.latitude=e.result.location.lat,u.a.setCookie("latitude",o.latitude,1))}))})},getCollectInfo:function(t){var e=t.state,o=t.commit;return new c.a(function(t,i){d()({url:e.global.hftcomShop,method:"POST",data:'{"id":19,"jsonrpc":"2.0","method":"isCollectGet","params":{"userCode":"'+e.userCode+'"}}'}).then(function(i){o("setStateItem",{name:"CouponListInfo",data:i.data.result}),t(e.CouponListInfo)})})},fetchUserCouponList:function(t,e){var o=t.state,i=t.commit;return new c.a(function(t,a){d()({url:o.global.hftcomClient,method:"POST",data:'{"id": 67,"jsonrpc": "2.0","method": "getMyAvailableCoupon","params": {"shopCode": "","userCode": "'+o.userCode+'","status": '+e.status+',"page": '+e.page+',"longitude": '+o.longitude+',"latitude":'+o.latitude+',"city":"'+o.localCity+'"}}',contentType:"application/json"}).then(function(a){1===e.page?(i("setStateItem",{name:"userCouponList",data:a.data.result.userCouponList}),t(a.data.result.totalCount)):(o.userCouponList=[].concat(n()(o.userCouponList),n()(a.data.result.userCouponList)),t(a.data.result.totalCount))})})},bindMobile:function(t,e){var o=t.state;return new c.a(function(t,i){d()({url:o.global.hftcomShop,method:"POST",data:'{"id":19,"jsonrpc":"2.0","method":"bindMobile","params":{"userCode":"'+o.userCode+'","mobileNbr":"'+e.mobileNbr+'","Vcode":"'+e.Vcode+'"}}',contentType:"application/json"}).then(function(n){5e4===n.data.result.code?(u.a.setCookie("mobileNbr",e.mobileNbr,1),o.mobileNbr=e.mobileNbr,t(n)):i(n)})})},isWeiXin:function(){return new c.a(function(t,e){null!==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?(console.log("是微信浏览器"),t()):(console.log("不是微信浏览器"),e())})}}},214:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"recharge"},[o("div",{staticClass:"wrap"},[o("div",{staticClass:"name"},[t._v("充值金额")]),t._v(" "),o("div",{staticClass:"money"},[o("span",{staticClass:"money-item",class:{"money-item-active":5e4===t.moneyactive},on:{click:function(e){t.choose(5e4)}}},[t._v("￥50.00")]),t._v(" "),o("span",{staticClass:"money-item",class:{"money-item-active":1e4===t.moneyactive},on:{click:function(e){t.choose(1e4)}}},[t._v("￥100.00")]),t._v(" "),o("span",{staticClass:"money-item",class:{"money-item-active":1===t.moneyactive},on:{click:function(e){t.choose(1)}}},[t._v("￥0.01")])])]),t._v(" "),o("div",{staticClass:"rechargebtn",on:{click:t.recharge}},[t._v("充值")]),t._v("\n        支付回执显示:"+t._s(t.msg)+"\n        "),o("br"),o("br"),o("br"),o("br"),t._v(" "),o("center",[t._v("跳转工银e生活测试")]),t._v(" "),o("br"),o("br"),t._v(" "),o("div",{staticClass:"rechargebtn",on:{click:function(e){t.openApp()}}},[t._v("点击打开e生活")])],1)},staticRenderFns:[]}},22:function(t,e,o){"use strict";e.a={doneTodosCount:function(t){return t.todos.filter(function(t){return t.done})},filterUserCouponList:function(t){return function(e){return t.userCouponList.filter(function(t){return t.status===e})}}}},23:function(t,e,o){"use strict";e.a={isShowLoginBox:function(t,e){t.showLoginBox=e},setStateItem:function(t,e){t[e.name]=e.data}}},24:function(t,e,o){"use strict";var i=o(17),n=o.n(i),a=o(53),s=o.n(a),r=o(54),c=o.n(r),u=function(){function t(){s()(this,t),this.ls=window.localStorage}return c()(t,[{key:"setCookie",value:function(t,e,o){var i=arguments[0];if("Object"===Object.prototype.toString.call(i).slice(8,-1))for(var n in i)a=new Date,a.setDate(a.getDate()+o),document.cookie=n+"HFT="+i[n]+";expires="+a;else{var a=new Date;a.setDate(a.getDate()+o),document.cookie=t+"HFT="+e+";expires="+a}}},{key:"getCookie",value:function(t){var e=document.cookie.split("; ");t+="HFT";for(var o=0;o<e.length;o++){var i=e[o].split("=");if(i[0]===t)return i[1]}return""}},{key:"removeCookie",value:function(t){this.setCookie(t,1,-1)}},{key:"setLocal",value:function(t,e){var o=arguments[0];if("Object"===Object.prototype.toString.call(o).slice(8,-1))for(var i in o)this.ls.setItem(i+"HFT",n()(o[i]));else this.ls.setItem(t+"HFT",n()(e))}},{key:"getLocal",value:function(t){return t+="HFT",t?JSON.parse(this.ls.getItem(t)):null}},{key:"removeLocal",value:function(t){t+="HFT",this.ls.removeItem(t)}},{key:"clearLocal",value:function(){this.ls.clear()}},{key:"stringify",value:function(t){var e="";for(var o in t)e+=o+"="+t[o]+"&";return e}}]),t}();e.a=new u},25:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(52);e.default={name:"toast",mixins:[i.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}}},3:function(t,e){t.exports=Vue},30:function(t,e){},31:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vux-toast"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),t._v(" "),o("transition",{attrs:{name:t.currentTransition}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-toast",class:t.toastClass,style:{width:t.width}},[o("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t._v(" "),t.text?o("p",{staticClass:"weui-toast__content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):o("p",{staticClass:"weui-toast__content",style:t.style},[t._t("default")],2)])])],1)},staticRenderFns:[]}},7:function(t,e,o){"use strict";var i=o(3),n=o.n(i),a=o(6),s=o(21),r=o(22),c=o(23);n.a.use(a.a);var u=new a.a.Store({state:{isLogin:!1,isBLR:0,showLoginBox:!1,mobileNbr:"",password:"",userCode:"",tokenCode:"",localCity:"郑州市",latitude:"30.878131",longitude:"120.137198",isChooseCity:!1,zoneId:"",from:"",userCouponList:[],global:{hftcom:"https://cloud.hfq.huift.com.cn",hftcomClient:"https://cloud.hfq.huift.com.cn/Api/Client",hftcomShop:"https://cloud.hfq.huift.com.cn/Api/Shop",hftcomWeixinCard:"https://cloud.hfq.huift.com.cn/Api/WeiXinCard",hftcomEnCode:"http%3a%2f%2f192.168.5.118%3a2000%2f%23%2f",hftcomOpenID:"https://cloud.hfq.huift.com.cn/Admin/OpenId/getUserOpenId",hftcomGetUserInfo:"https://cloud.hfq.huift.com.cn/Api/Shop",Daipay:"https://cloud.hfq.huift.com.cn/Admin/Lcy/Daipay",Dipay:"https://cloud.hfq.huift.com.cn/Admin/Lcy/DiPay",getAT:"https://cloud.hfq.huift.com.cn/Admin/OpenId/getAccessToken"},weixin:{openId:"",code:"",htmldata:""},indexCouponList:[],indexCouponDetailsInfo:{},CouponListInfo:[],collectShopList:[],isbool:!0,searchIsBool:!0,searchShopList:[],nearbyIsBool:!0,nearbyShopList:[],searchConponIsBool:!0,searchConponList:[],searchTypeValue:0,searchTypeName:"行业",currentOrderInfo:[],isCancelOrder:!1},getters:r.a,mutations:c.a,actions:s.a});e.a=u},76:function(t,e,o){function i(t){o(30)}var n=o(0)(o(25),o(31),i,null,null);t.exports=n.exports}},[138]);
//# sourceMappingURL=recharge.c7db629ee23e97fc9115.js.map