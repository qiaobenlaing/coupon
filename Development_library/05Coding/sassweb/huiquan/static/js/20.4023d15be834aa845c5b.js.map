{"version":3,"sources":["webpack:///static/js/20.4023d15be834aa845c5b.js","webpack:///./src/components/myinformation/changemyinfo.vue?c74e","webpack:///./src/components/myinformation/changemyinfo.vue","webpack:///./src/components/myinformation/changemyinfo.vue?e8ed"],"names":["webpackJsonp","224","module","exports","__webpack_require__","injectStyle","ssrContext","Component","322","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_2_vuex__","name","head","title","data","oldUserInfo","userInfo","nickName","realName","city","sex","newUserInfo","position","showPositionValue","isLogin","cityList","isopen","computed","i","beforeCreate","methods","goBack","this","$router","go","getUserInfo","_this","axios","method","url","global","hftcomClient","userCode","contentType","dataType","then","result","item","updateUserInfo","_this2","flag","testNickName","testRealName","$vux","toast","text","test","console","log","$store","state","mobileNbr","code","openselect","chooseCity","closeSelect","created","_this3","dispatch","components","345","372","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","on","click","_v","$event","for","directives","rawName","expression","modifiers","lazy","placeholder","domProps","change","$set","target","type","checked","_q","_s","_l","accept","showNewAvatar","staticRenderFns"],"mappings":"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","file":"static/js/20.4023d15be834aa845c5b.js","sourcesContent":["webpackJsonp([20],{\n\n/***/ 224:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(345)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(322),\n  /* template */\n  __webpack_require__(372),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 322:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(6);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'myInformation',\n    head: function head() {\n        return {\n            title: '个人信息'\n        };\n    },\n    data: function data() {\n        return {\n            oldUserInfo: {}, // 数据库信息\n            userInfo: { 'nickName': '', 'realName': '', 'city': '', 'sex': '' }, // 用户编辑中的信息\n            newUserInfo: {}, // 要发送的修改过的信息，过滤掉了用户未修改的字段\n            position: 'default',\n            showPositionValue: true,\n            isLogin: true,\n            cityList: {},\n            isopen: false\n        };\n    },\n\n    computed: __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"b\" /* mapState */])(['mobileNbr', 'global', 'userCode']), __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"c\" /* mapGetters */])(['doneTodosCount'])),\n    beforeCreate: function beforeCreate() {},\n\n    methods: {\n        goBack: function goBack() {\n            this.$router.go(-1);\n        },\n\n        getUserInfo: function getUserInfo() {\n            var _this = this;\n\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomClient,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getUserInfo\",\"params\":{\"userCode\":\"' + this.userCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then(function (result) {\n                for (var item in _this.userInfo) {\n                    _this.userInfo[item] = result.data.result[item];\n                    _this.oldUserInfo[item] = result.data.result[item];\n                }\n            });\n        },\n        updateUserInfo: function updateUserInfo() {\n            var _this2 = this;\n\n            var flag = false; // 是否通过校验\n            var testNickName = /^[a-zA-Z0-9_\\u4E00-\\u9FA5]{1,15}$/;\n            var testRealName = /^[\\u4E00-\\u9FA5]{2,7}$/;\n\n            if (this.userInfo.nickName === '') {\n                this.$vux.toast.text('昵称不允许为空', 'bottom');\n            } else if (!testNickName.test(this.userInfo.nickName)) {\n                this.$vux.toast.text('昵称应为1-15位的中英文、数字及下划线', 'bottom');\n            } else if (this.userInfo.realName === '') {\n                this.$vux.toast.text('真实姓名不允许为空', 'bottom');\n            } else if (!testRealName.test(this.userInfo.realName)) {\n                this.$vux.toast.text('真实姓名只允许为中文2-7位', 'bottom');\n            } else if (this.userInfo.sex === 'U') {\n                this.$vux.toast.text('请选择性别', 'bottom');\n            } else if (this.userInfo.city === '') {\n                this.$vux.toast.text('请选择城市', 'bottom');\n            } else {\n                flag = true;\n            }\n            if (flag) {\n                for (var item in this.userInfo) {\n                    if (this.userInfo[item] !== this.oldUserInfo[item]) {\n                        this.newUserInfo[item] = this.userInfo[item];\n                    }\n                }\n                if (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.newUserInfo) === '{}') {\n                    this.$vux.toast.text('您未修改任何信息', 'bottom');\n                    flag = false;\n                }\n            }\n            if (flag) {\n                console.log('{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"updateUserInfo\",\"params\":{\"mobileNbr\":\"' + this.$store.state.mobileNbr + '\",\"userCode\":\"' + this.$store.state.userCode + '\",\"updateInfo\":' + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.newUserInfo) + '}}');\n\n                this.axios({\n                    method: 'post',\n                    url: this.global.hftcomClient,\n                    data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"updateUserInfo\",\"params\":{\"mobileNbr\":\"' + this.mobileNbr + '\",\"userCode\":\"' + this.userCode + '\",\"updateInfo\":' + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.newUserInfo) + '}}',\n                    contentType: 'application/json',\n                    dataType: 'json'\n                }).then(function (result) {\n                    switch (result.data.result.code) {\n                        case 50001:\n                            _this2.$vux.toast.text('请将信息填写完整', 'bottom');\n                            break;\n                        case 20000:\n                            _this2.$vux.toast.text('失败，请重试', 'bottom');\n                            break;\n                        case 50000:\n                            _this2.$vux.toast.text('修改成功', 'bottom');\n                            for (var i in _this2.newUserInfo) {\n                                _this2.oldUserInfo[i] = _this2.newUserInfo[i];\n                            }\n                            _this2.newUserInfo = {};\n                            flag = false;\n                            break;\n                        case 50003:\n                            _this2.$vux.toast.text('您没有修改任何信息', 'bottom');\n                            break;\n                        case 50008:\n                            _this2.$vux.toast.text('用户不存在', 'bottom');\n                            break;\n                        default:\n                            _this2.$vux.toast.text(result.data.result, 'bottom');\n                    };\n                });\n            }\n        },\n        openselect: function openselect() {\n            if (this.isopen === true) {\n                this.isopen = false;\n            } else {\n                this.isopen = true;\n            }\n        },\n        chooseCity: function chooseCity(city) {\n            this.userInfo.city = city;\n            this.isopen = false;\n        },\n        closeSelect: function closeSelect() {\n            this.isopen = false;\n        }\n    },\n    created: function created() {\n        var _this3 = this;\n\n        this.getUserInfo();\n        this.$store.dispatch('getOpenCity').then(function (data) {\n            _this3.cityList = data.result;\n        });\n    },\n\n    components: {}\n});\n\n/***/ }),\n\n/***/ 345:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 372:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"changemyinfo\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\"\n  }, [_vm._v(\"修改个人信息\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.updateUserInfo()\n      }\n    }\n  }, [_vm._v(\"保存\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"panel\"\n  }, [_c('p', [_c('label', {\n    attrs: {\n      \"for\": \"nickName\"\n    }\n  }, [_vm._v(\"呢称\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.nickName),\n      expression: \"userInfo.nickName\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"nickName\",\n      \"value\": \"edit me\",\n      \"placeholder\": \"请填写昵称\"\n    },\n    domProps: {\n      \"value\": (_vm.userInfo.nickName)\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"nickName\", $event.target.value)\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('label', {\n    attrs: {\n      \"for\": \"realName\"\n    }\n  }, [_vm._v(\"真实姓名\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.realName),\n      expression: \"userInfo.realName\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"realName\",\n      \"value\": \"女\",\n      \"placeholder\": \"请填写真实姓名\"\n    },\n    domProps: {\n      \"value\": (_vm.userInfo.realName)\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"realName\", $event.target.value)\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('label', {\n    attrs: {\n      \"for\": \"sex\"\n    }\n  }, [_vm._v(\"性别\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"radio\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"male\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.sex),\n      expression: \"userInfo.sex\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    attrs: {\n      \"type\": \"radio\",\n      \"id\": \"male\",\n      \"value\": \"M\"\n    },\n    domProps: {\n      \"checked\": _vm._q(_vm.userInfo.sex, \"M\")\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"sex\", \"M\")\n      }\n    }\n  }), _vm._v(\"男\")])]), _vm._v(\" \"), _c('span', {\n    staticClass: \"radio\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"female\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.sex),\n      expression: \"userInfo.sex\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    staticClass: \"radio\",\n    attrs: {\n      \"type\": \"radio\",\n      \"id\": \"female\",\n      \"value\": \"F\"\n    },\n    domProps: {\n      \"checked\": _vm._q(_vm.userInfo.sex, \"F\")\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"sex\", \"F\")\n      }\n    }\n  }), _vm._v(\"女\")])]), _vm._v(\" \"), _c('span', {\n    staticClass: \"radio\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"U\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.sex),\n      expression: \"userInfo.sex\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    staticClass: \"radio\",\n    attrs: {\n      \"type\": \"radio\",\n      \"id\": \"U\",\n      \"value\": \"U\"\n    },\n    domProps: {\n      \"checked\": _vm._q(_vm.userInfo.sex, \"U\")\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"sex\", \"U\")\n      }\n    }\n  }), _vm._v(\"未填\")])])]), _c('div', {\n    staticClass: \"city\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"city\"\n    }\n  }, [_vm._v(\"城市\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"cityInfo\"\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"select\"\n    },\n    on: {\n      \"click\": _vm.openselect\n    }\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userInfo.city !== ''),\n      expression: \"userInfo.city!==''\"\n    }]\n  }, [_vm._v(_vm._s(_vm.userInfo.city))]), _vm._v(\" \"), _c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userInfo.city === ''),\n      expression: \"userInfo.city===''\"\n    }]\n  }, [_vm._v(\"请选择\")])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isopen),\n      expression: \"isopen\"\n    }],\n    staticClass: \"select-item\"\n  }, _vm._l((_vm.cityList), function(city) {\n    return _c('p', {\n      attrs: {\n        \"value\": city.name\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.chooseCity(city.name)\n        }\n      }\n    }, [_vm._v(_vm._s(city.name))])\n  })), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon-ctrl\",\n    on: {\n      \"click\": _vm.openselect\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isopen),\n      expression: \"isopen\"\n    }],\n    staticClass: \"selectMask\",\n    on: {\n      \"click\": _vm.closeSelect\n    }\n  })])]), _vm._v(\" \"), _c('input', {\n    attrs: {\n      \"type\": \"file\",\n      \"id\": \"changeAvatar\",\n      \"accept\": \"image/*\"\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.showNewAvatar()\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/20.4023d15be834aa845c5b.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1575bec5\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./changemyinfo.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./changemyinfo.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1575bec5\\\",\\\"hasScoped\\\":false}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./changemyinfo.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/myinformation/changemyinfo.vue\n// module id = 224\n// module chunks = 20","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapState, mapGetters} from 'vuex';\n\nexport default{\n    name: 'myInformation',\n    head() {\n        return {\n            title: '个人信息'\n        };\n    },\n    data () {\n        return {\n            oldUserInfo: {}, // 数据库信息\n            userInfo: {'nickName': '', 'realName': '', 'city': '', 'sex': ''}, // 用户编辑中的信息\n            newUserInfo: {}, // 要发送的修改过的信息，过滤掉了用户未修改的字段\n            position: 'default',\n            showPositionValue: true,\n            isLogin: true,\n            cityList: {},\n            isopen: false\n        };\n    },\n    computed: {\n        ...mapState(['mobileNbr', 'global', 'userCode']),\n        ...mapGetters(['doneTodosCount'])\n    },\n    beforeCreate() {\n    },\n    methods: {\n        goBack () {\n            this.$router.go(-1);\n        },\n        getUserInfo: function() {\n            this.axios({\n                method: 'post',\n                url: this.global.hftcomClient,\n                data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"getUserInfo\",\"params\":{\"userCode\":\"' + this.userCode + '\"}}',\n                contentType: 'application/json',\n                dataType: 'json'\n            }).then((result) => {\n                for (var item in this.userInfo) {\n                    this.userInfo[item] = result.data.result[item];\n                    this.oldUserInfo[item] = result.data.result[item];\n                }\n            });\n        },\n        updateUserInfo: function() {\n            var flag = false;// 是否通过校验\n            var testNickName = /^[a-zA-Z0-9_\\u4E00-\\u9FA5]{1,15}$/;\n            var testRealName = /^[\\u4E00-\\u9FA5]{2,7}$/;\n\n            if (this.userInfo.nickName === '') {\n                this.$vux.toast.text('昵称不允许为空', 'bottom');\n            } else if (!testNickName.test(this.userInfo.nickName)) {\n                this.$vux.toast.text('昵称应为1-15位的中英文、数字及下划线', 'bottom');\n            } else if (this.userInfo.realName === '') {\n                this.$vux.toast.text('真实姓名不允许为空', 'bottom');\n            } else if (!testRealName.test(this.userInfo.realName)) {\n                this.$vux.toast.text('真实姓名只允许为中文2-7位', 'bottom');\n            } else if (this.userInfo.sex === 'U') {\n                this.$vux.toast.text('请选择性别', 'bottom');\n            } else if (this.userInfo.city === '') {\n                this.$vux.toast.text('请选择城市', 'bottom');\n            } else {\n                flag = true;\n            }\n            if (flag) {\n                for (var item in this.userInfo) {\n                    if (this.userInfo[item] !== this.oldUserInfo[item]) {\n                        this.newUserInfo[item] = this.userInfo[item];\n                    }\n                }\n                if (JSON.stringify(this.newUserInfo) === '{}') {\n                    this.$vux.toast.text('您未修改任何信息', 'bottom');\n                    flag = false;\n                }\n            }\n            if (flag) {\n                console.log('{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"updateUserInfo\",\"params\":{\"mobileNbr\":\"' + this.$store.state.mobileNbr + '\",\"userCode\":\"' + this.$store.state.userCode + '\",\"updateInfo\":' + JSON.stringify(this.newUserInfo) + '}}');\n\n                this.axios({\n                    method: 'post',\n                    url: this.global.hftcomClient,\n                    data: '{\"id\":19,\"jsonrpc\":\"2.0\",\"method\":\"updateUserInfo\",\"params\":{\"mobileNbr\":\"' + this.mobileNbr + '\",\"userCode\":\"' + this.userCode + '\",\"updateInfo\":' + JSON.stringify(this.newUserInfo) + '}}',\n                    contentType: 'application/json',\n                    dataType: 'json'\n                }).then((result) => {\n                    switch (result.data.result.code) {\n                    case 50001:\n                        this.$vux.toast.text('请将信息填写完整', 'bottom');\n                        break;\n                    case 20000:\n                        this.$vux.toast.text('失败，请重试', 'bottom');\n                        break;\n                    case 50000:\n                        this.$vux.toast.text('修改成功', 'bottom');\n                        for (var i in this.newUserInfo) {\n                            this.oldUserInfo[i] = this.newUserInfo[i];\n                        }\n                        this.newUserInfo = {};\n                        flag = false;\n                        break;\n                    case 50003:\n                        this.$vux.toast.text('您没有修改任何信息', 'bottom');\n                        break;\n                    case 50008:\n                        this.$vux.toast.text('用户不存在', 'bottom');\n                        break;\n                    default:\n                        this.$vux.toast.text(result.data.result, 'bottom');\n                    };\n                });\n            }\n        },\n        openselect: function() {\n            if (this.isopen === true) {\n                this.isopen = false;\n            } else {\n                this.isopen = true;\n            }\n        },\n        chooseCity: function(city) {\n            this.userInfo.city = city;\n            this.isopen = false;\n        },\n        closeSelect: function() {\n            this.isopen = false;\n        }\n    },\n    created() {\n        this.getUserInfo();\n        this.$store.dispatch('getOpenCity').then((data) => {\n            this.cityList = data.result;\n        });\n    },\n    components: {\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/myinformation/changemyinfo.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"changemyinfo\"\n    }\n  }, [_c('header', {\n    staticClass: \"header\"\n  }, [_c('span', {\n    staticClass: \"header-item icon-back\",\n    on: {\n      \"click\": _vm.goBack\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\"\n  }, [_vm._v(\"修改个人信息\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"header-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.updateUserInfo()\n      }\n    }\n  }, [_vm._v(\"保存\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"panel\"\n  }, [_c('p', [_c('label', {\n    attrs: {\n      \"for\": \"nickName\"\n    }\n  }, [_vm._v(\"呢称\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.nickName),\n      expression: \"userInfo.nickName\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"nickName\",\n      \"value\": \"edit me\",\n      \"placeholder\": \"请填写昵称\"\n    },\n    domProps: {\n      \"value\": (_vm.userInfo.nickName)\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"nickName\", $event.target.value)\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('label', {\n    attrs: {\n      \"for\": \"realName\"\n    }\n  }, [_vm._v(\"真实姓名\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.realName),\n      expression: \"userInfo.realName\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    attrs: {\n      \"id\": \"realName\",\n      \"value\": \"女\",\n      \"placeholder\": \"请填写真实姓名\"\n    },\n    domProps: {\n      \"value\": (_vm.userInfo.realName)\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"realName\", $event.target.value)\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('label', {\n    attrs: {\n      \"for\": \"sex\"\n    }\n  }, [_vm._v(\"性别\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"radio\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"male\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.sex),\n      expression: \"userInfo.sex\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    attrs: {\n      \"type\": \"radio\",\n      \"id\": \"male\",\n      \"value\": \"M\"\n    },\n    domProps: {\n      \"checked\": _vm._q(_vm.userInfo.sex, \"M\")\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"sex\", \"M\")\n      }\n    }\n  }), _vm._v(\"男\")])]), _vm._v(\" \"), _c('span', {\n    staticClass: \"radio\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"female\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.sex),\n      expression: \"userInfo.sex\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    staticClass: \"radio\",\n    attrs: {\n      \"type\": \"radio\",\n      \"id\": \"female\",\n      \"value\": \"F\"\n    },\n    domProps: {\n      \"checked\": _vm._q(_vm.userInfo.sex, \"F\")\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"sex\", \"F\")\n      }\n    }\n  }), _vm._v(\"女\")])]), _vm._v(\" \"), _c('span', {\n    staticClass: \"radio\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"U\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.lazy\",\n      value: (_vm.userInfo.sex),\n      expression: \"userInfo.sex\",\n      modifiers: {\n        \"lazy\": true\n      }\n    }],\n    staticClass: \"radio\",\n    attrs: {\n      \"type\": \"radio\",\n      \"id\": \"U\",\n      \"value\": \"U\"\n    },\n    domProps: {\n      \"checked\": _vm._q(_vm.userInfo.sex, \"U\")\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.$set(_vm.userInfo, \"sex\", \"U\")\n      }\n    }\n  }), _vm._v(\"未填\")])])]), _c('div', {\n    staticClass: \"city\"\n  }, [_c('label', {\n    attrs: {\n      \"for\": \"city\"\n    }\n  }, [_vm._v(\"城市\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"cityInfo\"\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"select\"\n    },\n    on: {\n      \"click\": _vm.openselect\n    }\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userInfo.city !== ''),\n      expression: \"userInfo.city!==''\"\n    }]\n  }, [_vm._v(_vm._s(_vm.userInfo.city))]), _vm._v(\" \"), _c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userInfo.city === ''),\n      expression: \"userInfo.city===''\"\n    }]\n  }, [_vm._v(\"请选择\")])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isopen),\n      expression: \"isopen\"\n    }],\n    staticClass: \"select-item\"\n  }, _vm._l((_vm.cityList), function(city) {\n    return _c('p', {\n      attrs: {\n        \"value\": city.name\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.chooseCity(city.name)\n        }\n      }\n    }, [_vm._v(_vm._s(city.name))])\n  })), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon-ctrl\",\n    on: {\n      \"click\": _vm.openselect\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isopen),\n      expression: \"isopen\"\n    }],\n    staticClass: \"selectMask\",\n    on: {\n      \"click\": _vm.closeSelect\n    }\n  })])]), _vm._v(\" \"), _c('input', {\n    attrs: {\n      \"type\": \"file\",\n      \"id\": \"changeAvatar\",\n      \"accept\": \"image/*\"\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.showNewAvatar()\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-1575bec5\",\"hasScoped\":false}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/myinformation/changemyinfo.vue\n// module id = 372\n// module chunks = 20"],"sourceRoot":""}